<!doctype html>
<html lang="es">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DYZ3GCXHEK"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-DYZ3GCXHEK');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0f1320" />
  <title>ITHub ¬∑ CONTENIDOS ‚Äî MOC educativo</title>
  <meta name="description" content="MOC de contenidos: res√∫menes, gu√≠as y laboratorios para AZ-104, AZ-305, SAA-C03 y m√°s. Filtra por examen, vendor y nivel.">
  <link rel="icon" type="image/svg+xml" 
        href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><defs><linearGradient id='g' x1='0' y1='0' x2='0' y2='1'><stop stop-color='%238aa0ff'/><stop offset='1' stop-color='%23425dff'/></linearGradient></defs><rect rx='12' width='64' height='64' fill='url(%23g)'/><text x='32' y='42' font-family='Segoe UI,Arial' font-size='28' fill='white' font-weight='900' text-anchor='middle'>IT</text></svg>">

  <style>
    :root{
      --bg:#0f1320;--surface:#161b2d;--surface2:#1b2140;--ink:#e8ecff;--muted:#9ca8d9;
      --stroke:#283056;--radius:14px;--shadow:0 12px 28px rgba(6,12,40,.45);
      --ok:#3ad97a;--warn:#ffd66b;--bad:#ff6b6b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter,ui-sans-serif,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 420px at 90% -10%,rgba(255,153,0,.12),transparent 60%),
        radial-gradient(800px 400px at 10% 0%,rgba(0,120,212,.12),transparent 60%),
        var(--bg);
      line-height:1.6;overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:0 20px}
    .muted{color:var(--muted)}

    /* Header (id√©ntico a tu web) */
    header{position:sticky;top:0;z-index:50;backdrop-filter:blur(10px);
      background:linear-gradient(180deg,rgba(15,19,32,.85),rgba(15,19,32,.55));border-bottom:1px solid var(--stroke)}
    .nav{height:64px;display:flex;align-items:center;justify-content:space-between;gap:10px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:900;text-transform:uppercase}
    .brand img.site-logo{height:42px;width:auto;display:block}
    nav.menu{display:flex;gap:12px;color:var(--muted);font-weight:800;align-items:center;text-transform:uppercase}
    nav.menu a.link-btn{display:inline-flex;align-items:center;justify-content:center;min-width:110px;min-height:44px;height:40px;padding:0 12px;border-radius:10px;border:1px solid transparent;font-weight:900}
    nav.menu a.link-btn:hover{border-color:#2a3150;color:var(--ink)}
    .authwrap{display:flex;align-items:center;gap:6px;background:linear-gradient(180deg,#151b31,#12182c); border:1px solid #2a3150; border-radius:999px; padding:4px; box-shadow:0 6px 18px rgba(5,10,30,.35); max-height:44px;}
    .hello{display:flex;align-items:center;gap:6px;color:#cbd3ff;font-weight:800;padding:4px 8px;font-size:12px}
    .pill-btn{display:inline-flex;align-items:center;justify-content:center;min-width:88px;min-height:44px;height:34px;padding:0 12px;border-radius:10px;border:1px solid #3b2fff44;background:linear-gradient(180deg,#7a67ff,#5f48ff); color:#fff; font-weight:900; cursor:pointer;transition:transform .08s, background .12s; font-size:13px;text-transform:uppercase;}
    .pill-btn:hover{transform:translateY(-1px)}
    .btn{display:inline-flex;align-items:center;justify-content:center;min-height:44px;height:40px;padding:0 14px;border-radius:12px;border:1px solid var(--stroke);background:transparent;color:var(--ink);font-weight:900;cursor:pointer;text-transform:uppercase;}
    .btn:hover{border-color:#3a4580}

    /* HERO */
    .hero{padding:22px 0 10px;text-align:center}
    .hero h1{margin:0 0 4px;font-size:clamp(1.5rem,3.2vw,2.2rem)}
    .lead{color:var(--muted);max-width:840px;margin:4px auto 0;font-size:.98rem}

    /* FILTROS (grid respirado) */
    .filters{position:sticky;top:64px;z-index:45;background:linear-gradient(180deg,rgba(15,19,32,.92),rgba(15,19,32,.72));border-bottom:1px solid var(--stroke);backdrop-filter:blur(10px)}
    .filters .bar{
      display:grid; gap:12px; padding:12px 0;
      grid-template-columns:1.6fr 1fr 1fr auto auto auto;
      grid-template-areas:"search exams vendors level sort clear";
      align-items:center;
    }
    #search{grid-area:search}
    #examTags{grid-area:exams}
    #vendorTags{grid-area:vendors}
    #level{grid-area:level}
    #sort{grid-area:sort}
    #clear{grid-area:clear}

    .filters input[type="text"], .filters select{
      width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--stroke);
      background:var(--surface2);color:var(--ink);font-weight:800
    }
    .tagbar{display:flex;gap:8px;flex-wrap:wrap}
    .tag{font-size:12px;padding:6px 10px;border-radius:999px;background:var(--surface2);border:1px solid var(--stroke);color:#cfe1ff;cursor:pointer}
    .tag.active{background:linear-gradient(180deg,#6c8bff,#3e64ff);border-color:transparent;color:#0e1030}

    @media(max-width:980px){
      .filters .bar{
        grid-template-columns:1fr 1fr 1fr;
        grid-template-areas:
          "search search search"
          "exams exams vendors"
          "level sort clear";
      }
    }
    @media(max-width:640px){
      .filters .bar{
        grid-template-columns:1fr 1fr;
        grid-template-areas:
          "search search"
          "exams exams"
          "vendors vendors"
          "level sort"
          "clear clear";
      }
      #clear{justify-self:end}
    }

    /* GRID 3 columnas */
    .grid{display:grid;gap:14px;margin-top:14px}
    @media(min-width:820px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:1140px){.grid{grid-template-columns:repeat(3,1fr)}}

    /* Cards */
    .card{position:relative;background:linear-gradient(180deg,#111937,#0f1633);border:1px solid #23305a;border-radius:18px;padding:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px}
    .level{position:absolute;top:10px;right:10px;font-size:11px;padding:4px 8px;border-radius:999px;background:var(--surface2);border:1px solid var(--stroke);color:#cfe1ff}
    .badges{display:flex;gap:6px;flex-wrap:wrap}
    .badge{font-size:11px;padding:4px 7px;border-radius:8px;background:var(--surface2);border:1px solid var(--stroke);color:#cfe1ff}
    .summary{color:#c3cff5}
    .actions{display:flex;gap:8px;margin-top:auto;flex-wrap:wrap}

    /* Drawer */
    .drawer{position:fixed;inset:0;display:none}
    .drawer.open{display:block}
    .drawer .overlay{position:absolute;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(2px)}
    .drawer .panel{position:absolute;right:0;top:0;height:100%;width:min(900px,100%);background:var(--surface);border-left:1px solid var(--stroke);display:flex;flex-direction:column}
    .drawer header{padding:14px 16px;border-bottom:1px solid var(--stroke);display:flex;gap:12px;align-items:center}
    .drawer header h2{margin:0;font-size:18px}
    .drawer .content{padding:16px;overflow:auto}
    .toc{font-size:13px;color:#cfe1ff;display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}
    .toc a{padding:6px 8px;border-radius:8px;background:var(--surface2);border:1px solid var(--stroke);text-decoration:none}
    .sep{height:1px;background:var(--stroke);margin:16px 0}
    .empty{padding:40px;border:1px dashed #31466f;border-radius:16px;color:#b8c3db;text-align:center;background:rgba(16,22,45,.4)}

    /* Footer */
    footer{border-top:1px solid var(--stroke);padding:24px 0;color:#9ca8d9;background:linear-gradient(180deg,rgba(22,27,45,.6),rgba(22,27,45,.2))}
    .f-grid{display:grid;gap:14px}
    @media(min-width:720px){.f-grid{grid-template-columns:1.2fr .8fr .8fr .8fr}}
    footer a{color:#cfe1ff}
  </style>
</head>
<body>
  <!-- HEADER -->
  <header role="banner">
    <div class="container nav">
      <div class="brand"><img class="site-logo" src="/assets/ithub-logo.svg" alt="ITHub: inicio"></div>
      <nav class="menu" aria-label="Navegaci√≥n principal">
        <a class="link-btn" href="#simuladores">SIMULADORES</a>
        <a class="link-btn" href="/content/content.html">CONTENIDOS</a>
        <a class="link-btn" href="/score/ranking.html">RANKING</a>
      </nav>
      <div class="authwrap" id="authWrap" aria-label="Acciones de sesi√≥n">
        <a id="btnLogin"  class="pill-btn" href="/login/login.html" role="button">LOGIN</a>
        <a id="btnSignup" class="pill-btn" href="/login/login.html#signup" role="button">REG√çSTRATE</a>
        <div id="userArea" style="display:none;align-items:center;gap:6px">
          <div class="hello">üëã <span id="userNameTop" style="font-weight:900">USER</span></div>
          <a class="pill-btn" href="/user/profile.html" role="button">PERFIL</a>
          <button id="btnLogout" class="pill-btn" type="button">LOGOUT</button>
        </div>
      </div>
    </div>
  </header>

  <main id="main">
    <section class="hero">
      <div class="container">
        <h1>üìö CONTENIDOS ¬∑ MOC educativo</h1>
        <p class="lead">Filtra por examen, proveedor y nivel. Abre cada recurso para ver <strong>resumen, laboratorio, exam tips, checklist</strong> y m√°s.</p>
      </div>
    </section>

    <!-- FILTROS -->
    <div class="filters" role="region" aria-label="Filtros y b√∫squeda">
      <div class="container bar">
        <input id="search" type="text" placeholder="Buscar (tema, examen, vendor, palabra clave)‚Ä¶" aria-label="Buscar" />
        <div class="tagbar" id="examTags" aria-label="Ex√°menes"></div>
        <div class="tagbar" id="vendorTags" aria-label="Vendors"></div>
        <select id="level" aria-label="Nivel">
          <option value="">Todos los niveles</option>
          <option>b√°sico</option>
          <option>intermedio</option>
          <option>avanzado</option>
        </select>
        <select id="sort" aria-label="Ordenar por">
          <option value="title">T√≠tulo (A‚ÜíZ)</option>
          <option value="level">Nivel</option>
          <option value="vendor">Vendor</option>
          <option value="exam">Examen</option>
          <option value="bookmarked">Guardados primero</option>
        </select>
        <button class="btn" id="clear">Limpiar</button>
      </div>
    </div>

    <section aria-labelledby="sec-title">
      <div class="container">
        <div id="sec-title" class="sec-title" style="font-weight:900;margin:14px 0 0;text-transform:uppercase">Cat√°logo de recursos</div>
        <div class="muted" style="display:flex;gap:10px;align-items:center;margin-top:6px">
          <span>Resultados: <strong id="count">0</strong></span>
          <span>‚≠ê Guardados: <strong id="savedCount">0</strong></span>
        </div>
        <div id="cards" class="grid" role="list"></div>
        <div id="empty" class="empty" style="display:none">No hay resultados con esos filtros. Prueba a quitar alguno.</div>
      </div>
    </section>
  </main>

  <!-- DRAWER -->
  <div class="drawer" id="drawer" aria-hidden="true">
    <div class="overlay" id="overlay"></div>
    <div class="panel">
      <header>
        <button class="btn" id="close" type="button">‚úï</button>
        <h2 id="drawerTitle"></h2>
        <span class="badge" id="drawerMeta"></span>
      </header>
      <div class="content">
        <nav class="toc" id="toc"></nav>
        <article id="article" class="article"></article>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer role="contentinfo">
    <div class="container f-grid">
      <div>
        <div class="brand" style="text-transform:none">
          <span class="logo-pill" aria-hidden="true" style="width:18px;height:34px;border-radius:10px;background:linear-gradient(180deg,#8aa0ff 0%,#425dff 100%);box-shadow:0 0 0 6px rgba(108,139,255,.18)"></span>
          <span>ITHub.es</span>
        </div>
        <p style="margin:8px 0 0;">Aprende, practica y aprueba tus certificaciones mientras compites con el resto del mundo.<br><br>Todo lo que necesitas en un s√≥lo lugar.</p>
      </div>
      <div>
        <div style="font-weight:800">Simuladores</div>
        <div><a href="/certification/microsoft-azure/az-104/lz-azure-az-104.html">AZ-104</a></div>
        <div><a href="/certification/amazon aws/aws-saa-c03/lz-aws-saa-c03.html">SAA-C03</a></div>
        <div><a href="/certification/microsoft-azure/az-305/lz-azure-az-305.html">AZ-305</a></div>
      </div>
      <div>
        <div style="font-weight:800">Contenidos</div>
        <div><a href="/content/azure-landing-zone.html">Azure ¬∑ Landing Zone</a></div>
        <div><a href="/content/azure-storage-az104.html">Azure ¬∑ Storage (AZ-104)</a></div>
        <div><a href="/content/azure-hybrid-connectivity-az305.html">Azure ¬∑ Conectividad h√≠brida</a></div>
        <div><a href="/content/aws-s3-design-saac03.html">AWS ¬∑ S3 dise√±o</a></div>
        <div><a href="/content/aws-sqs-sns-patterns.html">AWS ¬∑ SQS & SNS</a></div>
      </div>
      <div>
        <div style="font-weight:800">Colaborador</div>
        üí¨ <span><a href="https://mundoazure.cloud" target="_blank">https://mundoazure.cloud</a></span><br><br>
        <div style="font-weight:800">Contacto</div>
        <button id="footerContactBtn" type="button" style="background:none;border:none;color:#cfe1ff;font-weight:800;display:inline-flex;align-items:center;gap:6px;cursor:pointer;padding:0;margin-top:6px;">üí¨ <span>Cont√°ctanos</span></button>
      </div>
    </div>
    <div class="container" style="margin-top:12px;font-size:12px;">¬© <span id="y"></span> ITHub.es</div>
  </footer>

  <script>
  (function(){
    /* ===== Banner de error visible ===== */
    function showFatal(msg, err){
      var cnt = document.getElementById('cards') || document.body;
      var box = document.createElement('div');
      box.style.cssText = "margin:20px;padding:16px;border:1px solid #aa3355;border-radius:12px;background:#2a1120;color:#ffdbe6;font-weight:800";
      box.textContent = "‚ö†Ô∏è Error en contenidos: " + msg + (err?(" ¬∑ " + (err.message||err)):"");
      if(cnt){ cnt.innerHTML = ""; cnt.appendChild(box); }
      console.error("ITHub Content Error:", err||msg);
    }

    try{
      /* A√±o */
      var yEl = document.getElementById('y'); if(yEl){ yEl.textContent = new Date().getFullYear(); }

      /* Auth header b√°sico */
      function getCurrentUser(){ try{ return JSON.parse(localStorage.getItem("currentUser")||"null"); }catch(e){ return null; } }
      function renderHeaderAuth(){
        var u=getCurrentUser();
        var login=document.getElementById('btnLogin');
        var signup=document.getElementById('btnSignup');
        var userArea=document.getElementById('userArea');
        var nameTop=document.getElementById('userNameTop');
        if(!login||!signup||!userArea||!nameTop) return;
        if(u){ login.style.display='none'; signup.style.display='none'; userArea.style.display='flex'; nameTop.textContent=(u.name||u.email||'USER').toUpperCase(); }
        else{ login.style.display='inline-flex'; signup.style.display='inline-flex'; userArea.style.display='none'; }
      }
      var btnLogout=document.getElementById('btnLogout');
      if(btnLogout){ btnLogout.addEventListener('click', function(){ localStorage.removeItem('currentUser'); renderHeaderAuth(); }); }
      renderHeaderAuth();

      /* ===== Datos (si no existen, meto un m√≠nimo para que se vea algo) ===== */
      if(!window.CONTENT || Object.prototype.toString.call(window.CONTENT)!=='[object Array]'){
        window.CONTENT = [
          { title:'Backup inmutable & Ciberrecuperaci√≥n', href:'/content/immutable-backup-cyberrecovery.html', exam:['AZ-104','AZ-305','SAA-C03'], vendor:['Azure','AWS'], level:'avanzado',
            summary:'Estrategia 3-2-1-1-0, WORM (Blob/S3), b√≥vedas aisladas, redes cerradas y runbooks.',
            body:'<h2 id="objetivos">Objetivos</h2><ul><li>3-2-1-1-0 y WORM</li><li>Blob Immutable / S3 Object Lock</li></ul>'
          },
          { title:'VNet Peering vs. VPN Gateway (AZ-104)', href:'/content/vnet-peering-vpn.html', exam:['AZ-104'], vendor:['Azure'], level:'intermedio',
            summary:'Comparativa, tr√°nsito, cifrado, costes y laboratorio.',
            body:'<h2 id="cuando-usar">¬øCu√°ndo usar?</h2><p>Peering intra-backbone vs VPN IPsec.</p>'
          }
        ];
      }

      /* ===== Utilidades ===== */
      function lower(s){ try{return (s||'').toLowerCase();}catch(e){return s+'';} }
      function isArr(a){ return Object.prototype.toString.call(a)==='[object Array]'; }
      function uniqFlat(field){
        var out=[], seen={};
        for(var i=0;i<window.CONTENT.length;i++){
          var v = window.CONTENT[i][field];
          if(isArr(v)){
            for(var j=0;j<v.length;j++){
              var k=v[j]; if(k!=null && !seen[k]){ seen[k]=1; out.push(k); }
            }
          }
        }
        out.sort(); return out;
      }
      function toSlug(s){
        s=(s||'')+'';
        if(String.prototype.normalize){ s=s.normalize('NFD').replace(/[\u0300-\u036f]/g,''); }
        s=s.toLowerCase().replace(/[^a-z0-9\- ]/g,'').replace(/\s+/g,'-');
        return s;
      }

      /* ===== Estado local ===== */
      var LS_KEY='ithub-content-state';
      var state; try{ state=JSON.parse(localStorage.getItem(LS_KEY)||'{}'); }catch(_e){ state={}; }
      state.bookmarks = state.bookmarks && isArr(state.bookmarks) ? state.bookmarks : [];
      function hasBm(t){ return state.bookmarks.indexOf(t)>=0; }
      function toggleBm(t){
        var i=state.bookmarks.indexOf(t);
        if(i>=0) state.bookmarks.splice(i,1); else state.bookmarks.push(t);
        try{ localStorage.setItem(LS_KEY, JSON.stringify(state)); }catch(_e){}
      }

      /* ===== DOM refs ===== */
      var elSearch=document.getElementById('search');
      var elExamTags=document.getElementById('examTags');
      var elVendorTags=document.getElementById('vendorTags');
      var elLevel=document.getElementById('level');
      var elSort=document.getElementById('sort');
      var elClear=document.getElementById('clear');
      var elCards=document.getElementById('cards');
      var elCount=document.getElementById('count');
      var elSaved=document.getElementById('savedCount');
      var elEmpty=document.getElementById('empty');

      if(!elCards){ return showFatal('No encuentro #cards'); }

      /* ===== Pintar chips ===== */
      function paintChips(container, list){
        if(!container) return;
        container.innerHTML='';
        for(var i=0;i<list.length;i++){
          var b=document.createElement('button');
          b.className='tag'; b.setAttribute('type','button'); b.textContent=list[i]; b.setAttribute('data-value', list[i]);
          container.appendChild(b);
        }
      }
      paintChips(elExamTags, uniqFlat('exam'));
      paintChips(elVendorTags, uniqFlat('vendor'));

      function activeVals(container){
        var out=[], btns = container ? container.querySelectorAll('.tag.active') : [];
        for(var i=0;i<btns.length;i++){ out.push(btns[i].getAttribute('data-value')); }
        return out;
      }

      /* ===== Filtros ===== */
      function currentFilters(){
        return {
          q: lower(elSearch ? elSearch.value : ''),
          exams: activeVals(elExamTags),
          vendors: activeVals(elVendorTags),
          level: elLevel ? elLevel.value : ''
        };
      }
      function matches(item,f){
        var text = lower((item.title||'')+' '+(item.summary||'')+' '+(isArr(item.exam)?item.exam.join(' '):'')+' '+(isArr(item.vendor)?item.vendor.join(' '):''));
        var qOk = !f.q || text.indexOf(f.q)>=0;
        var exOk = !f.exams.length || (isArr(item.exam) && f.exams.some(function(x){ return item.exam.indexOf(x)>=0; }));
        var veOk = !f.vendors.length || (isArr(item.vendor) && f.vendors.some(function(x){ return item.vendor.indexOf(x)>=0; }));
        var lvOk = !f.level || item.level===f.level;
        return qOk && exOk && veOk && lvOk;
      }
      function sortItems(items){
        var by = elSort ? elSort.value : 'title';
        items.sort(function(a,b){
          if(by==='level') return (a.level||'').localeCompare(b.level||'');
          if(by==='vendor') return ((a.vendor&&a.vendor[0])||'').localeCompare((b.vendor&&b.vendor[0])||'');
          if(by==='exam') return ((a.exam&&a.exam[0])||'').localeCompare((b.exam&&b.exam[0])||'');
          if(by==='bookmarked'){
            var sa = hasBm(a.title)?1:0, sb = hasBm(b.title)?1:0;
            if(sb-sa!==0) return (sb-sa);
          }
          return (a.title||'').localeCompare(b.title||'');
        });
        return items;
      }

      /* ===== Drawer ===== */
      var drawer=document.getElementById('drawer');
      var article=document.getElementById('article');
      var toc=document.getElementById('toc');
      var drawerTitle=document.getElementById('drawerTitle');
      var drawerMeta=document.getElementById('drawerMeta');
      var overlay=document.getElementById('overlay');
      var btnClose=document.getElementById('close');

      function openArticle(item){
        if(!drawer||!article) return;
        drawerTitle.textContent=item.title||'';
        var ex=(isArr(item.exam)?item.exam.join(', '):'');
        var ve=(isArr(item.vendor)?item.vendor.join(', '):'');
        drawerMeta.textContent=ex+(ex&&ve?' ‚Ä¢ ':'')+ve+(item.level?(' ‚Ä¢ '+item.level):'');
        article.innerHTML=item.body || '<p>Este recurso a√∫n no tiene contenido extendido. Abre <em>'+ (item.href||'') +'</em>.</p>';
        toc.innerHTML='';
        var hs=article.querySelectorAll('h2,h3');
        for(var i=0;i<hs.length;i++){
          var h=hs[i]; if(!h.id){ h.id = toSlug(h.textContent||('sec-'+i)); }
          var a=document.createElement('a'); a.href='#'+h.id; a.textContent=h.textContent||('Secci√≥n '+(i+1));
          toc.appendChild(a);
        }
        drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false');
      }
      function closeDrawer(){ if(!drawer) return; drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); }
      if(overlay) overlay.addEventListener('click', closeDrawer);
      if(btnClose) btnClose.addEventListener('click', closeDrawer);
      window.addEventListener('keydown', function(e){ if(e.key==='Escape') closeDrawer(); });

      /* ===== Render ===== */
      function updateSaved(){ if(elSaved) elSaved.textContent = String(state.bookmarks.length||0); }
      function render(){
        try{
          var f=currentFilters();
          var items=[], i;
          for(i=0;i<window.CONTENT.length;i++){ var it=window.CONTENT[i]; if(matches(it,f)) items.push(it); }
          sortItems(items);

          elCards.innerHTML='';
          for(i=0;i<items.length;i++){
            var item=items[i];
            var c=document.createElement('article'); c.className='card'; c.setAttribute('role','listitem');

            var lev=document.createElement('div'); lev.className='level'; lev.textContent=item.level||''; c.appendChild(lev);
            var h4=document.createElement('h4'); h4.style.margin='0'; h4.textContent=item.title||''; c.appendChild(h4);

            var badges=document.createElement('div'); badges.className='badges';
            if(isArr(item.exam)){ for(var e=0;e<item.exam.length;e++){ var b1=document.createElement('span'); b1.className='badge'; b1.textContent=item.exam[e]; badges.appendChild(b1);} }
            if(isArr(item.vendor)){ for(var v=0;v<item.vendor.length;v++){ var b2=document.createElement('span'); b2.className='badge'; b2.textContent=item.vendor[v]; badges.appendChild(b2);} }
            c.appendChild(badges);

            var p=document.createElement('div'); p.className='summary'; p.textContent=item.summary||''; c.appendChild(p);

            var actions=document.createElement('div'); actions.className='actions';
            var readBtn=document.createElement('button'); readBtn.className='pill-btn'; readBtn.textContent='Leer';
            (function(itm){ readBtn.addEventListener('click', function(){ openArticle(itm); }); })(item);
            actions.appendChild(readBtn);

            var saveBtn=document.createElement('button'); saveBtn.className='btn';
            var saved = hasBm(item.title);
            saveBtn.textContent = saved ? '‚òÖ Guardado' : '‚òÜ Guardar';
            if(saved) saveBtn.style.borderColor='#3ad97a';
            (function(itm,btn){
              saveBtn.addEventListener('click', function(){
                toggleBm(itm.title);
                var now = hasBm(itm.title);
                btn.textContent = now ? '‚òÖ Guardado' : '‚òÜ Guardar';
                btn.style.borderColor = now ? '#3ad97a' : '';
                updateSaved();
              });
            })(item, saveBtn);
            actions.appendChild(saveBtn);

            c.appendChild(actions);
            elCards.appendChild(c);
          }

          if(elCount) elCount.textContent = String(items.length);
          if(elEmpty) elEmpty.style.display = items.length ? 'none' : 'block';
        }catch(err){
          showFatal('Fallo en render()', err);
        }
      }

      /* Eventos filtros */
      function onTagClick(e){
        var t=e.target; if(!t||!t.classList||!t.classList.contains('tag')) return;
        if(t.classList.contains('active')) t.classList.remove('active'); else t.classList.add('active');
        render();
      }
      if(elExamTags) elExamTags.addEventListener('click', onTagClick);
      if(elVendorTags) elVendorTags.addEventListener('click', onTagClick);
      if(elLevel) elLevel.addEventListener('change', render);
      if(elSort) elSort.addEventListener('change', render);
      if(elClear) elClear.addEventListener('click', function(){
        var actives=document.querySelectorAll('.tag.active'); for(var i=0;i<actives.length;i++) actives[i].classList.remove('active');
        if(elLevel) elLevel.value=''; if(elSort) elSort.value='title'; if(elSearch) elSearch.value='';
        render();
      });
      if(elSearch) elSearch.addEventListener('input', render);

      /* Init */
      updateSaved();
      render();
    }catch(ex){ showFatal('Error inesperado en bootstrap', ex); }
  })();
  </script>
</body>
</html>
