<!-- azure-az305-tips-domain2.html -->
<section id="az305-d2" style="font-family:Inter,ui-sans-serif,-apple-system,'Segoe UI',Roboto,Arial,sans-serif; line-height:1.6; color:#eaf0ff; background:transparent; margin:0; padding:0;">
  <div style="margin:0 0 16px 0;">
    <h1 style="margin:0 0 8px 0; font-weight:900; letter-spacing:.2px; color:#eaf0ff; font-size:clamp(24px,3.2vw,34px);">
      Diseñar soluciones de almacenamiento de datos (D2)
    </h1>
    <p style="margin:6px 0 10px 0; color:#aeb8d6;">
      El objetivo es seleccionar el servicio y patrón de datos óptimos considerando <strong style="color:#eaf0ff;">consistencia, latencia, coste, escalabilidad, seguridad y recuperación</strong>.
    </p>
  </div>

  <!-- Índice -->
  <nav aria-label="Índice" style="display:flex; flex-wrap:wrap; gap:8px; margin:4px 0 14px 0;">
    <a href="#map" style="display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#1a2546; border:1px solid #26345a; color:#d7e6ff; font-weight:800; text-decoration:none;">
      <svg width="14" height="14"><circle cx="7" cy="7" r="5" fill="#0078d4"/></svg> Mapa de cargas → servicio
    </a>
    <a href="#sql" style="display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#1a2546; border:1px solid #26345a; color:#d7e6ff; font-weight:800; text-decoration:none;">
      <svg width="14" height="14"><circle cx="7" cy="7" r="5" fill="#6a78b4"/></svg> SQL (PaaS y MI)
    </a>
    <a href="#cosmos" style="display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#1a2546; border:1px solid #26345a; color:#d7e6ff; font-weight:800; text-decoration:none;">
      <svg width="14" height="14"><circle cx="7" cy="7" r="5" fill="#6a78b4"/></svg> Cosmos DB
    </a>
    <a href="#storage" style="display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#1a2546; border:1px solid #26345a; color:#d7e6ff; font-weight:800; text-decoration:none;">
      <svg width="14" height="14"><circle cx="7" cy="7" r="5" fill="#6a78b4"/></svg> Azure Storage
    </a>
    <a href="#analytics" style="display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#1a2546; border:1px solid #26345a; color:#d7e6ff; font-weight:800; text-decoration:none;">
      <svg width="14" height="14"><circle cx="7" cy="7" r="5" fill="#6a78b4"/></svg> Analítica (Synapse/Fabric)
    </a>
    <a href="#security" style="display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#1a2546; border:1px solid #26345a; color:#d7e6ff; font-weight:800; text-decoration:none;">
      <svg width="14" height="14"><circle cx="7" cy="7" r="5" fill="#6a78b4"/></svg> Seguridad &amp; red
    </a>
    <a href="#ha" style="display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#1a2546; border:1px solid #26345a; color:#d7e6ff; font-weight:800; text-decoration:none;">
      <svg width="14" height="14"><circle cx="7" cy="7" r="5" fill="#6a78b4"/></svg> HA/DR y copia
    </a>
    <a href="#patterns" style="display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#1a2546; border:1px solid #26345a; color:#d7e6ff; font-weight:800; text-decoration:none;">
      <svg width="14" height="14"><circle cx="7" cy="7" r="5" fill="#6a78b4"/></svg> Patrones / Trampas
    </a>
    <a href="#exam" style="display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#1a2546; border:1px solid #26345a; color:#d7e6ff; font-weight:800; text-decoration:none;">
      <svg width="14" height="14"><circle cx="7" cy="7" r="5" fill="#6a78b4"/></svg> Preguntas tipo
    </a>
  </nav>

  <!-- Mapa -->
  <div id="map" style="background:linear-gradient(180deg,#111b33,#0f1931); border:1px solid #26345a; border-radius:14px; padding:16px; box-shadow:0 10px 28px rgba(0,0,0,.45); margin:0 0 14px 0;">
    <h2 style="margin:0 0 8px 0; font-weight:900; color:#eaf0ff; font-size:clamp(18px,2.4vw,24px);">Mapa rápido carga → servicio</h2>
    <table style="width:100%; border-collapse:separate; border-spacing:0; border:1px solid #26345a; border-radius:12px; overflow:hidden; background:#101a32;">
      <thead>
        <tr>
          <th style="padding:10px 12px; background:#132347; text-align:left; color:#d5e3ff; font-weight:900;">Carga</th>
          <th style="padding:10px 12px; background:#132347; text-align:left; color:#d5e3ff; font-weight:900;">Servicio</th>
          <th style="padding:10px 12px; background:#132347; text-align:left; color:#d5e3ff; font-weight:900;">Motivo</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="padding:10px 12px; border-bottom:1px solid #26345a;">OLTP relacional</td>
          <td style="padding:10px 12px; border-bottom:1px solid #26345a;">Azure SQL DB / MI</td>
          <td style="padding:10px 12px; border-bottom:1px solid #26345a; color:#aeb8d6;">Transaccional, T-SQL, HA/DR integrados.</td>
        </tr>
        <tr>
          <td style="padding:10px 12px; border-bottom:1px solid #26345a;">NoSQL global</td>
          <td style="padding:10px 12px; border-bottom:1px solid #26345a;">Cosmos DB</td>
          <td style="padding:10px 12px; border-bottom:1px solid #26345a; color:#aeb8d6;">Latencia &lt;10 ms, replicación multi-región, 5 modelos API.</td>
        </tr>
        <tr>
          <td style="padding:10px 12px; border-bottom:1px solid #26345a;">Ficheros/objetos</td>
          <td style="padding:10px 12px; border-bottom:1px solid #26345a;">Blob / Files / ADLS Gen2</td>
          <td style="padding:10px 12px; border-bottom:1px solid #26345a; color:#aeb8d6;">Coste/escala, jerarquía HNS para analítica.</td>
        </tr>
        <tr>
          <td style="padding:10px 12px;">Analítica/BIG data</td>
          <td style="padding:10px 12px;">Synapse / Fabric Lakehouse</td>
          <td style="padding:10px 12px; color:#aeb8d6;">SQL/Apache/Spark, separa cómputo y almacenamiento.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- SQL -->
  <div id="sql" style="background:linear-gradient(180deg,#111b33,#0f1931); border:1px solid #26345a; border-radius:14px; padding:16px; box-shadow:0 10px 28px rgba(0,0,0,.45); margin:0 0 14px 0;">
    <h2 style="margin:0 0 8px 0; font-weight:900; color:#eaf0ff; font-size:clamp(18px,2.4vw,24px);">Azure SQL (Database, Managed Instance, VM)</h2>
    <ul style="list-style:disc; padding-left:22px; margin:8px 0; color:#aeb8d6;">
      <li><strong style="color:#eaf0ff;">SQL DB (PaaS)</strong>: app nuevas, compatibilidad alta; HA/DR automático (zone redundant), autoscale serverless.</li>
      <li><strong style="color:#eaf0ff;">Managed Instance</strong>: compatibilidad casi 100% con SQL Server; soporte Agent/Linked Servers; mejor para lift &amp; shift.</li>
      <li><strong style="color:#eaf0ff;">SQL en VM</strong>: control total SO/FS, necesario para features no soportadas en MI.</li>
      <li><strong style="color:#eaf0ff;">Disponibilidad</strong>: <em>Auto-failover groups</em> para DR multirregión; <em>Long-term backup retention</em> hasta 10 años.</li>
      <li><strong style="color:#eaf0ff;">Rendimiento</strong>: DTU vs vCore; <em>Accelerated Networking</em>; TempDB en disco rápido.</li>
    </ul>
  </div>

  <!-- Cosmos -->
  <div id="cosmos" style="background:linear-gradient(180deg,#111b33,#0f1931); border:1px solid #26345a; border-radius:14px; padding:16px; box-shadow:0 10px 28px rgba(0,0,0,.45); margin:0 0 14px 0;">
    <h2 style="margin:0 0 8px 0; font-weight:900; color:#eaf0ff; font-size:clamp(18px,2.4vw,24px);">Cosmos DB: claves de diseño</h2>
    <ul style="list-style:disc; padding-left:22px; margin:8px 0; color:#aeb8d6;">
      <li><strong style="color:#eaf0ff;">Partición</strong>: elige clave con alta cardinalidad y distribución uniforme; evita hot partitions.</li>
      <li><strong style="color:#eaf0ff;">Modelado</strong>: diseña por consultas; datos desnormalizados; TTL para housekeeping.</li>
      <li><strong style="color:#eaf0ff;">Consistencia</strong>: 5 niveles. Por defecto <em>Session</em> (mejor compromiso). <em>Strong</em> solo en una región.</li>
      <li><strong style="color:#eaf0ff;">Multi-región</strong>: <em>Multi-master</em> si necesitas escrituras en varias regiones; resuelve conflictos (LWW/Custom).</li>
      <li><strong style="color:#eaf0ff;">Coste</strong>: RU/s aprovisionadas o autoscale; mide RU de consultas; índices selectivos.</li>
    </ul>
  </div>

  <!-- Storage -->
  <div id="storage" style="background:linear-gradient(180deg,#111b33,#0f1931); border:1px solid #26345a; border-radius:14px; padding:16px; box-shadow:0 10px 28px rgba(0,0,0,.45); margin:0 0 14px 0;">
    <h2 style="margin:0 0 8px 0; font-weight:900; color:#eaf0ff; font-size:clamp(18px,2.4vw,24px);">Azure Storage: Blob, Files, Queues, Tables</h2>
    <ul style="list-style:disc; padding-left:22px; margin:8px 0; color:#aeb8d6;">
      <li><strong style="color:#eaf0ff;">Redundancia</strong>: LRS &lt; ZRS &lt; GRS/GZRS. Para misión crítica: <em>GZRS</em> + <em>versioning</em> + <em>soft delete</em>.</li>
      <li><strong style="color:#eaf0ff;">ADLS Gen2</strong>: jerarquía HNS, ACLs POSIX para analítica; usa <em>Private Endpoints</em>.</li>
      <li><strong style="color:#eaf0ff;">Files</strong>: SMB/NFS; <em>Azure File Sync</em> para caché on-prem; backup con Azure Backup.</li>
      <li><strong style="color:#eaf0ff;">Tiering</strong>: Hot/Cool/Archive con políticas de ciclo de vida (lifecycle).</li>
    </ul>
  </div>

  <!-- Analítica -->
  <div id="analytics" style="background:linear-gradient(180deg,#111b33,#0f1931); border:1px solid #26345a; border-radius:14px; padding:16px; box-shadow:0 10px 28px rgba(0,0,0,.45); margin:0 0 14px 0;">
    <h2 style="margin:0 0 8px 0; font-weight:900; color:#eaf0ff; font-size:clamp(18px,2.4vw,24px);">Synapse / Fabric / Databricks (visión)</h2>
    <ul style="list-style:disc; padding-left:22px; margin:8px 0; color:#aeb8d6;">
      <li><strong style="color:#eaf0ff;">Lakehouse</strong> en ADLS/Fabric OneLake; separación almacenamiento/cómputo.</li>
      <li><strong style="color:#eaf0ff;">Ingesta</strong>: Data Factory/Mapping Data Flows; streaming con Event Hubs/Kafka.</li>
      <li><strong style="color:#eaf0ff;">Seguridad</strong>: acceso por <em>ABAC</em> (atributos) + <em>RBAC</em>; en Fabric, <em>workspaces</em> aislados.</li>
    </ul>
  </div>

  <!-- Seguridad -->
  <div id="security" style="background:linear-gradient(180deg,#111b33,#0f1931); border:1px solid #26345a; border-radius:14px; padding:16px; box-shadow:0 10px 28px rgba(0,0,0,.45); margin:0 0 14px 0;">
    <h2 style="margin:0 0 8px 0; font-weight:900; color:#eaf0ff; font-size:clamp(18px,2.4vw,24px);">Seguridad, identidad y red</h2>
    <ul style="list-style:disc; padding-left:22px; margin:8px 0; color:#aeb8d6;">
      <li><strong style="color:#eaf0ff;">Identity</strong>: Managed Identity + Azure AD auth (SQL, Storage, Key Vault).</li>
      <li><strong style="color:#eaf0ff;">Cifrado</strong>: SSE por defecto; para BYOK usa <em>Key Vault</em>; DDE para SQL/MI.</li>
      <li><strong style="color:#eaf0ff;">Red</strong>: Private Endpoints; deshabilita acceso público; Firewall + Defender for Cloud.</li>
      <li><strong style="color:#eaf0ff;">DLP</strong>: etiquetas/Policy para evitar blobs sin cifrar/etiquetas.</li>
    </ul>
  </div>

  <!-- HA/DR -->
  <div id="ha" style="background:linear-gradient(180deg,#111b33,#0f1931); border:1px solid #26345a; border-radius:14px; padding:16px; box-shadow:0 10px 28px rgba(0,0,0,.45); margin:0 0 14px 0;">
    <h2 style="margin:0 0 8px 0; font-weight:900; color:#eaf0ff; font-size:clamp(18px,2.4vw,24px);">Alta disponibilidad, DR y copia</h2>
    <ul style="list-style:disc; padding-left:22px; margin:8px 0; color:#aeb8d6;">
      <li><strong style="color:#eaf0ff;">RPO/RTO</strong> define el servicio: SQL AFG (minutos), Cosmos multi-región (segundos), Storage GZRS (minutos-horas).</li>
      <li><strong style="color:#eaf0ff;">Backup</strong>: Azure Backup para SQL VM/Files; LTR en Azure SQL; snapshots para Blob.</li>
      <li><strong style="color:#eaf0ff;">Geo</strong>: <em>paired regions</em> y reglas de residencia/latencia.</li>
    </ul>
  </div>

  <!-- Patrones -->
  <div id="patterns" style="background:linear-gradient(180deg,#111b33,#0f1931); border:1px solid #26345a; border-radius:14px; padding:16px; box-shadow:0 10px 28px rgba(0,0,0,.45); margin:0 0 14px 0;">
    <h2 style="margin:0 0 8px 0; font-weight:900; color:#eaf0ff; font-size:clamp(18px,2.4vw,24px);">Patrones y trampas</h2>
    <div style="display:grid; gap:10px; grid-template-columns:repeat(2,minmax(0,1fr));">
      <div>
        <h3 style="margin:0 0 6px 0; font-weight:900; color:#eaf0ff;">Patrones</h3>
        <ul style="list-style:disc; padding-left:22px; margin:8px 0; color:#aeb8d6;">
          <li>Private Link + RBAC + CMK cuando sea necesario.</li>
          <li>Lifecycle para tiering automático en Blob.</li>
          <li>Cosmos con TTL y partición compuesta.</li>
        </ul>
      </div>
      <div>
        <h3 style="margin:0 0 6px 0; font-weight:900; color:#eaf0ff;">Trampas</h3>
        <ul style="list-style:disc; padding-left:22px; margin:8px 0; color:#aeb8d6;">
          <li>Elegir Strong en Cosmos sin justificar; coste/latencia elevados.</li>
          <li>Usar GRS pensando que es <em>readable</em> (solo RA-GRS lo es).</li>
          <li>Dar acceso público a Storage por comodidad.</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Examen -->
  <div id="exam" style="background:linear-gradient(180deg,#111b33,#0f1931); border:1px solid #26345a; border-radius:14px; padding:16px; box-shadow:0 10px 28px rgba(0,0,0,.45);">
    <h2 style="margin:0 0 8px 0; font-weight:900; color:#eaf0ff; font-size:clamp(18px,2.4vw,24px);">Preguntas tipo examen</h2>
    <ol style="list-style:decimal; padding-left:22px; margin:8px 0; color:#aeb8d6;">
      <li>“NoSQL global con escrituras multi-región” → Cosmos <strong style="color:#eaf0ff;">multi-master</strong>, consistencia <em>Session</em>, clave de partición uniforme.</li>
      <li>“Migrar SQL on-prem con Agent y Linked Servers” → <strong style="color:#eaf0ff;">Managed Instance</strong> + AFG para DR.</li>
      <li>“Reducir coste de datos fríos” → <strong style="color:#eaf0ff;">Lifecycle</strong> Hot→Cool→Archive.</li>
      <li>“Acceso a Storage sin Internet” → <strong style="color:#eaf0ff;">Private Endpoint</strong> + deshabilitar tráfico público.</li>
    </ol>
  </div>
</section>
