<!doctype html>
<html lang="es">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DYZ3GCXHEK"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-DYZ3GCXHEK');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0f1320" />

  <title>AZ-104: Simulador y guÃ­a de estudio â€” Azure Administrator | ITHub</title>
  <meta name="description" content="Portada de la certificaciÃ³n AZ-104 Azure Administrator: simulador de examen, dominios oficiales, nube de conceptos y tips de estudio para aprobar con confianza." />
  <link rel="canonical" href="https://www.ithub.es/certification/microsoft-azure/az-104/lz-azure-az-104.html" />
  <meta name="robots" content="index,follow" />

  <meta property="og:title" content="AZ-104: Simulador y guÃ­a de estudio â€” Azure Administrator" />
  <meta property="og:description" content="Practica con el simulador AZ-104, revisa dominios y consolida conceptos clave de administraciÃ³n de Azure." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.ithub.es/certification/microsoft-azure/az-104/lz-azure-az-104.html" />
  <meta property="og:site_name" content="ITHub.es" />
  <link rel="icon" type="image/svg+xml" 
href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><defs><linearGradient id='g' x1='0' y1='0' x2='0' y2='1'><stop stop-color='%238aa0ff'/><stop offset='1' stop-color='%23425dff'/></linearGradient></defs><rect rx='12' width='64' height='64' fill='url(%23g)'/><text x='32' y='42' font-family='Segoe UI,Arial' font-size='28' fill='white' font-weight='900' text-anchor='middle'>IT</text></svg>">

  <style>
    :root{
      --bg:#0f1320;--surface:#161b2d;--surface2:#1b2140;--ink:#e8ecff;--muted:#9ca8d9;
      --stroke:#283056;--azure:#0078d4;--radius:16px;--shadow:0 12px 28px rgba(6,12,40,.45);
      --cta:linear-gradient(180deg,#76c7ff,#0078d4);
      --ok:#20d38a;--warn:#ffd76b;--bad:#ff6b6b;

      /* Header global ITHub */
      --brand:#6c8bff;
      --pill-bg:linear-gradient(180deg,#151b31,#12182c);
      --pill-ring:#2a3150;
      --pill-btn-bg:linear-gradient(180deg,#7a67ff,#5f48ff);
      --pill-btn-bg-hover:linear-gradient(180deg,#8a78ff,#6b54ff);
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter,ui-sans-serif,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 420px at 90% -10%,rgba(0,120,212,.14),transparent 60%),
        radial-gradient(800px 400px at 10% 0%,rgba(0,120,212,.10),transparent 60%),
        var(--bg);
      line-height:1.6;overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1160px;margin:0 auto;padding:0 20px}

    /* HEADER (clases usadas por includes/header.html) */
    header{
      position:sticky;top:0;z-index:50;backdrop-filter:blur(10px);
      background:linear-gradient(180deg,rgba(15,19,32,.85),rgba(15,19,32,.55));
      border-bottom:1px solid var(--stroke);
    }
    .nav{height:64px;display:flex;align-items:center;justify-content:space-between;gap:10px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:900;text-transform:uppercase}
    .brand img.site-logo{height:42px;width:auto;display:block}
    nav.menu{display:flex;gap:16px;color:var(--muted);font-weight:800;align-items:center;text-transform:uppercase}
    nav.menu .link-btn{display:inline-flex;align-items:center;justify-content:center;min-width:110px;min-height:44px;height:40px;padding:0 12px;border-radius:10px;border:1px solid transparent;font-weight:900}
    nav.menu .link-btn:hover{border-color:#2a3150;color:var(--ink)}

    .authwrap{
      display:flex;align-items:center;gap:6px;
      background:var(--pill-bg);
      border:1px solid var(--pill-ring);
      border-radius:999px;
      padding:4px;
      box-shadow:0 6px 18px rgba(5,10,30,.35);
      max-height:44px;
    }
    .hello{
      display:flex;
      align-items:center;
      gap:6px;
      color:#cbd3ff;
      font-weight:800;
      padding:4px 8px;
      font-size:12px;
    }
    .pill-btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width:100px;
      min-height:44px;
      height:34px;
      padding:0 14px;
      border-radius:12px;
      border:1px solid #3b2fff44;
      background:var(--pill-btn-bg);
      color:#fff;
      font-weight:900;
      cursor:pointer;
      transition:transform .08s, background .12s;
      font-size:13px;
      text-transform:uppercase;
    }
    .pill-btn:hover{
      background:var(--pill-btn-bg-hover);
      transform:translateY(-1px);
    }
    @media (max-width:720px){
      nav.menu{gap:8px}
      nav.menu .link-btn{min-width:90px;height:36px}
      .authwrap{gap:4px}
      .pill-btn{min-width:82px;height:32px;padding:0 10px}
      .hello{display:none}
    }

    /* NAV DESPLEGABLE (para submenÃºs del header) */
    .menu-has-sub { gap: 6px; }
    .menu-group { position: relative; display: flex; align-items: center; }
    .has-sub-trigger { position: relative; padding-right: 18px; }
    .has-sub-trigger .caret { font-size: 0.7rem; opacity: 0.7; margin-left: 4px; }
    .menu-group .submenu {
      position: absolute;
      top: 110%;
      left: 0;
      min-width: 220px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: linear-gradient(180deg, #141b3a, #101631);
      box-shadow: 0 14px 28px rgba(5, 10, 30, 0.55);
      display: none;
      flex-direction: column;
      gap: 4px;
      z-index: 60;
    }
    .menu-group .submenu a {
      display: block;
      padding: 4px 8px;
      font-size: 0.8rem;
      font-weight: 700;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }
    .menu-group .submenu a:hover {
      background: rgba(108, 139, 255, 0.18);
      color: var(--ink);
      border-radius: 8px;
    }
    .submenu-title {
      margin-top: 6px;
      margin-bottom: 2px;
      padding: 2px 8px;
      font-size: 0.78rem;
      font-weight: 800;
      letter-spacing: 0.12em;
      color: #cfe1ff;
      opacity: 0.7;
      text-transform: uppercase;
    }
    .submenu.open { display: flex; }
    @media (min-width: 721px) {
      .menu-group:hover > .submenu,
      .menu-group:focus-within > .submenu {
        display: flex;
      }
    }
    @media (max-width: 720px) {
      .menu { flex-wrap: wrap; }
      .menu-group { flex-direction: column; align-items: flex-start; }
      .menu-group .submenu {
        position: static;
        margin-top: 4px;
        width: 100%;
        box-shadow: 0 6px 16px rgba(5,10,30,.35);
        display: none;
      }
      .menu-group .submenu.open { display: flex; }
    }

    /* HERO */
    .hero{padding:22px 0 8px}
    .hero .eyebrow{display:inline-flex;align-items:center;gap:8px;font-weight:900;color:#cfe1ff;background:rgba(0,120,212,.15);
      border:1px solid rgba(0,120,212,.45);border-radius:999px;padding:6px 10px}
    .hero h1{margin:10px 0 10px;font-size:clamp(1.7rem,3.8vw,2.6rem);line-height:1.2}
    .hero p{color:var(--muted);max-width:900px}

    /* Tabs */
    .tabbar{display:flex;gap:12px;margin-top:8px;flex-wrap:wrap}
    .tab-btn{display:inline-flex;align-items:center;gap:10px;justify-content:center;min-height:44px;padding:10px 16px;border-radius:12px;font-weight:900;cursor:pointer;border:1px solid #2a3150;background:transparent;color:#e8ecff}
    .tab-btn.active{background:var(--cta);border-color:transparent;color:#0b1930;box-shadow:0 10px 22px rgba(0,120,212,.22)}

    /* ====== DOMINIOS & SIMULADOR ====== */
    .wrap{max-width:1160px;margin:0 auto;padding:0 20px}
    .grid-sim{display:grid;grid-template-columns:1.35fr .85fr;gap:16px;margin-top:16px}
    @media(max-width:860px){.grid-sim{grid-template-columns:1fr}}
    .panel{background:var(--surface);border:1px solid var(--stroke);border-radius:12px;padding:16px;box-shadow:var(--shadow)}
    .domains-list{list-style:none;padding-left:0;margin:0;display:grid;gap:12px}
    .dom-item{display:flex;align-items:center;gap:12px;border:1px solid var(--stroke);background:var(--surface2);border-radius:14px;padding:14px 16px;cursor:pointer}
    .dom-item:hover{border-color:#3a4883}
    .dom-item.active{outline:3px solid rgba(108,139,255,.28)}
    .dom-code{width:36px;height:36px;min-width:36px;display:grid;place-items:center;border-radius:999px;background:#0078d4;color:#fff;font-weight:900;letter-spacing:.2px;box-shadow:0 6px 14px rgba(0,120,212,.28)}

    /* Chips dom */
    .chip-dom{display:inline-flex;align-items:center;gap:8px;background:#0d1935;border:1px solid #22315d;border-radius:16px;padding:10px 14px;font-weight:900;cursor:pointer;color:#d6e5ff}
    .chip-dom .led{width:12px;height:12px;border-radius:999px;background:transparent;border:2px solid #71a6ff}
    .chip-dom.on{background:rgba(0,120,212,.1);border-color:#3b6bc2;box-shadow:0 0 0 2px rgba(0,120,212,.22) inset}
    .chip-dom.on .led{background:#71a6ff;border-color:#71a6ff}

    /* Segmented (modo) */
    .segmented{display:flex;gap:8px;background:#0e1a3a;border:1px solid #2a3b6d;border-radius:12px;padding:6px}
    .segmented input{display:none}
    .segmented label{flex:1;text-align:center;padding:12px 14px;border-radius:10px;cursor:pointer;font-weight:900;color:#d9e6ff;user-select:none}
    .segmented input:checked + label{background:linear-gradient(180deg,#183e79,#122e5e);border:1px solid #4a7fd8;box-shadow:0 0 0 2px rgba(0,120,212,.28) inset}
    .segmented label.disabled{opacity:.45; cursor:not-allowed; filter:grayscale(40%);border:1px dashed #3a476f; background:#0d1630; pointer-events:none;}

    /* ====== SIMULADOR: sombreado azul ====== */
    #simCard{
      position:relative;border-radius:20px;padding:16px;
      background:
        radial-gradient(120% 160% at 10% -10%, rgba(120,185,255,.14), transparent 60%),
        linear-gradient(180deg,#0e152b,#0a1124);
      border:1px solid rgba(90,150,240,.35);
      box-shadow:0 22px 44px rgba(0,0,0,.55), inset 0 0 0 1px rgba(0,120,212,.20);
      overflow:hidden; z-index:0;
    }
    #simCard::before{
      content:"";position:absolute;inset:-10px;border-radius:24px;pointer-events:none;
      background:linear-gradient(180deg,rgba(120,185,255,.25),rgba(0,120,212,.28));
      filter:blur(12px);opacity:.8;z-index:0;
    }
    #simCard::after{
      content:"";position:absolute;inset:-4px;border-radius:22px;pointer-events:none;
      border:2px solid rgba(110,170,255,.65);
      box-shadow:0 0 0 5px rgba(0,120,212,.15), inset 0 0 18px rgba(114,170,255,.28), 0 0 22px rgba(0,120,212,.28);
      z-index:0;
    }
    #simCard *{position:relative;z-index:1}

    /* TÃ­tulo simulador */
    #simTitle{font-size:clamp(1.4rem,2.4vw,1.9rem); font-weight:900; line-height:1.15; margin:0 0 8px; text-shadow:0 12px 28px rgba(0,120,212,.35);}

    #startBtn{background:var(--cta);color:#09132a;border:1px solid #4a8edf;box-shadow:0 10px 28px rgba(0,120,212,.36)}

    /* ===== ESTADO BLOQUEADO ===== */
    #startBtn.locked{
      background:linear-gradient(180deg,#6fa4ff,#355ff6);
      color:#fff; border:1px solid rgba(71,103,220,.6);
      box-shadow:0 12px 26px rgba(53,95,246,.35);
    }
    #startBtn.locked .lock{
      display:inline-grid;place-items:center;width:18px;height:18px;margin-right:8px;border-radius:5px;
      background:linear-gradient(180deg,#ffd699,#ff9900);color:#111;font-weight:900;box-shadow:0 0 0 3px rgba(255,153,0,.18);font-size:12px;
    }

    #qCount{
      background:#0f1b3a;color:var(--ink);
      border:1px solid #2a3b6d;border-radius:10px;
      padding:10px 12px;font-weight:800;min-width:84px;
    }

    /* ===== Nube de conceptos (TIPS) ===== */
    #studyGuide{display:none;margin-top:14px}
    #studyGuide.open{display:block}
    .muted{color:var(--muted)}
    .cloud-toolbar{display:flex;gap:10px;align-items:center;margin:10px 0 8px}
    .cloud-toolbar input[type="search"]{flex:1;min-height:44px;border-radius:12px;border:1px solid var(--stroke);background:var(--surface2);color:var(--ink);padding:10px 12px;font-weight:800;}
    .concept-cloud{display:grid;grid-template-columns:repeat(6,1fr);gap:12px}
    @media(max-width:1180px){.concept-cloud{grid-template-columns:repeat(4,1fr)}}
    @media(max-width:860px){.concept-cloud{grid-template-columns:repeat(3,1fr)}}
    @media(max-width:560px){.concept-cloud{grid-template-columns:repeat(2,1fr)}}
    .chip-bubble{position:relative;display:flex;flex-direction:column;gap:6px;min-height:110px;padding:14px;border-radius:16px;border:1px solid #2a355f;background:linear-gradient(180deg,#11193a,#0e1632);box-shadow:0 12px 24px rgba(0,0,0,.28);transition:transform .12s ease, box-shadow .12s ease;}
    .chip-bubble:hover{transform:translateY(-3px);box-shadow:0 18px 38px rgba(0,0,0,.36)}
    .chip-bubble .cb-title{font-weight:900}
    .chip-bubble .cb-tip{color:var(--muted)}
    .chip-bubble b{color:#9fc7ff}
    .tiny-btn{display:inline-flex;align-items:center;justify-content:center;height:28px;padding:0 10px;border-radius:8px;border:1px solid #3b2fff44;background:linear-gradient(180deg,#6c8bff,#3e64ff);color:#fff;font-weight:900;white-space:nowrap}

    /* Tips rÃ¡pidos (checklist) */
    .tips-quick{background:linear-gradient(180deg,#0e1838,#0b142e);border:1px solid #24305c;border-radius:16px;padding:14px;box-shadow:0 10px 22px rgba(0,0,0,.28)}
    .tips-quick h4{margin:0 0 8px}
    .tips-quick li{margin:.32rem 0;list-style:none}
    .tips-quick li::before{content:'âœ”';color:#20d38a;margin-right:8px}

    /* ===== Footer ===== */
    footer{border-top:1px solid var(--stroke);padding:28px 0 18px;color:#9ca8d9;background:
      radial-gradient(80% 100% at 90% -10%,rgba(0,120,212,.14),transparent 60%),
      linear-gradient(180deg,rgba(22,27,45,.6),rgba(22,27,45,.2));margin-top:22px}
    .f-grid{display:grid;gap:14px}
    @media(min-width:720px){.f-grid{grid-template-columns:1.2fr .8fr .8fr .8fr}}
    footer a{color:#cfe1ff} footer a:hover{text-decoration:underline}
    .footer-bottom{margin-top:12px;font-size:12px;text-align:left;color:#b8c3f0}
  </style>
</head>
<body>

  <!-- Header comÃºn inyectado -->
  <div id="site-header"></div>

  <main id="main">
    <!-- HERO -->
    <section class="hero">
      <div class="container">
        <span class="eyebrow">MICROSOFT AZURE ADMINISTRATOR â€” ASSOCIATE (AZ-104)</span>
        <h1>Portada de la certificaciÃ³n <a href="/certification/microsoft-azure/az-104/index.html"><span style="color:#76c7ff">AZURE</span></a> / AZ-104</h1>
        <p>Domina la administraciÃ³n de Azure: identidades, almacenamiento, cÃ³mputo, redes y monitorizaciÃ³n. Accede a la <b>Nube de Conceptos</b> y al <b>Simulador por dominios</b>.</p>

        <!-- Botonera -->
        <div class="tabbar" role="tablist" aria-label="Vistas de AZ-104">
          <button id="tabSim" class="tab-btn active" role="tab" aria-selected="true" aria-controls="domsim">ðŸ§­ DOMINIOS & SIMULADOR</button>
          <button id="tabGuide" class="tab-btn" role="tab" aria-selected="false" aria-controls="studyGuide">ðŸ“˜ CONCEPTOS A EXAMEN</button>
        </div>

        <!-- ===== TIPS (NUBE) ===== -->
        <section id="studyGuide" aria-label="Tips AZ-104" role="tabpanel" aria-labelledby="tabGuide">
          <h2 style="margin:10px 0 6px;text-transform:uppercase">Tips de estudio AZ-104</h2>
          <p class="muted" style="margin:0 0 8px">Explora la nube de conceptos. Pasa el ratÃ³n para ver el tip y abre el contenido al instante. Filtra con bÃºsqueda.</p>

          <div class="cloud-toolbar">
            <input id="conceptSearch" type="search" placeholder="Buscar conceptos (ej: RBAC, Storage, VPN)" aria-label="Buscar conceptos">
          </div>

          <div id="conceptCloud" class="concept-cloud" role="list"></div>

          <!-- Consejos rÃ¡pidos (checklist) -->
          <div class="tips-quick" style="margin-top:14px">
            <h4>âœ… Consejos rÃ¡pidos para el examen</h4>
            <ul style="padding-left:0;margin:6px 0 0">
              <li>Identifica siempre <b>requisitos</b> (SLA, coste, seguridad, latencia) antes de elegir servicio.</li>
              <li>Prefiere soluciones <b>PaaS/Serverless</b> cuando el caso lo permita.</li>
              <li>Zonas de disponibilidad por defecto; multirregiÃ³n si hay <b>RTO/RPO</b> estrictos.</li>
              <li>Para acceso privado a PaaS, usa <b>Private Link</b> y DNS privado.</li>
              <li>Automatiza con <b>Bicep/Terraform</b> para reducir errores y repetir despliegues.</li>
            </ul>
          </div>
        </section>
      </div>
    </section>

    <!-- ===== DOMINIOS & SIMULADOR ===== -->
    <section id="domsim" role="tabpanel" aria-labelledby="tabSim">
      <div class="wrap">
        <div class="grid-sim">
          <!-- IZQUIERDA: dominios -->
          <section class="panel" id="leftInfo">
            <div style="display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap">
              <img id="provLogo" alt="Azure" style="width:66px;height:auto">
              <div id="provText" style="color:var(--muted)">Dominios oficiales y notas rÃ¡pidas por tema.</div>
            </div>

            <h2 style="margin-top:14px">Dominios del examen</h2>
            <p class="muted" style="margin-top:-6px"><em>Haz clic en un dominio para abrir notas Ãºtiles abajo.</em></p>

            <ul id="domainsList" class="domains-list"></ul>
          </section>

          <!-- DERECHA: simulador -->
          <aside class="panel" id="simCard" aria-label="Simulador AZ-104">
            <h3 id="simTitle">AZ-104 Â· Simulador de examen</h3>

            <div class="field">
              <label>Modo</label>
              <div class="segmented" id="modeSeg">
                <input type="radio" id="modePractice" name="mode" value="practice" checked>
                <label for="modePractice">PrÃ¡ctica</label>
                <input type="radio" id="modeExam" name="mode" value="exam" disabled>
                <label for="modeExam" class="disabled" title="Modo examen en desarrollo">Examen</label>
              </div>
            </div>

            <div class="field" style="margin-top:10px">
              <label>Preguntas</label>
              <select id="qCount">
                <option>5</option><option>10</option><option>15</option><option>30</option><option>65</option>
              </select>
            </div>

            <div class="field" style="margin-top:10px">
              <label>Dominios (filtro opcional)</label>
              <div id="domainChips" style="display:flex;flex-wrap:wrap;gap:10px"></div>
              <div style="color:var(--muted)">DÃ©jalo vacÃ­o para incluir todos los dominios.</div>
            </div>

            <div class="field" style="margin-top:14px">
              <button id="startBtn" class="pill-btn" type="button">â–¶ Empezar</button>
            </div>

            <div class="field" style="margin-top:6px;color:var(--muted)">
              Atajos:
              <span style="display:inline-flex;align-items:center;justify-content:center;min-width:28px;padding:2px 8px;border-radius:8px;background:#0f1a36;border:1px solid #2a3b6d;font-weight:900">N</span> Siguiente,
              <span style="display:inline-flex;align-items:center;justify-content:center;min-width:28px;padding:2px 8px;border-radius:8px;background:#0f1a36;border:1px solid #2a3b6d;font-weight:900">B</span> Anterior,
              <span style="display:inline-flex;align-items:center;justify-content:center;min-width:28px;padding:2px 8px;border-radius:8px;background:#0f1a36;border:1px solid #2a3b6d;font-weight:900">M</span> Marcar,
              <span style="display:inline-flex;align-items:center;justify-content:center;min-width:28px;padding:2px 8px;border-radius:8px;background:#0f1a36;border:1px solid #2a3b6d;font-weight:900">1-9</span> elegir.
            </div>
          </aside>
        </div>

        <!-- Notas del dominio -->
        <section id="infoDom" class="panel" aria-live="polite" style="display:none">
          <div class="info-head" style="display:flex;gap:10px;align-items:center;justify-content:space-between;background:
            radial-gradient(120% 120% at 100% -10%, rgba(0,120,212,.25), transparent 60%),
            linear-gradient(180deg, #121a48, #0f1437);padding:16px;border-bottom:1px solid #2a3b6d">
            <h3 id="infoTitle" style="margin:0">Notas del dominio</h3>
            <button id="infoClose" class="pill-btn" type="button">âœ– Cerrar</button>
          </div>
          <div id="infoContent" class="info-body" style="padding:16px">
            <div class="info-empty">Selecciona un dominio para ver notas ampliadas.</div>
          </div>
        </section>

        <!-- Ãrea de preguntas -->
        <main id="view" class="wrap" style="padding:0"></main>
      </div>
    </section>
  </main>

  <!-- Pie -->
  <footer role="contentinfo">
    <div class="container f-grid">
      <div>
        <div class="brand" style="text-transform:none">
          <span class="logo-pill" aria-hidden="true" style="width:18px;height:34px;border-radius:10px;background:linear-gradient(180deg,#8aa0ff 0%,#425dff 100%);box-shadow:0 0 0 6px rgba(108,139,255,.18)"></span>
          <span>ITHUB.ES</span>
        </div>
        <p style="margin:8px 0 0;">Aprende, practica y aprueba tus certificaciones IT  mientras compites con el resto del mundo.<br><br>Todo lo que necesitas en un sÃ³lo lugar.</p>
      </div>
      <div>
        <div style="font-weight:800">SIMULADORES</div>
        <div><a href="/certification/microsoft-azure/az-104/lz-azure-az-104.html">MICROSOFT AZURE AZ-104</a></div>
        <div><a href="/certification/microsoft-azure/az-305/lz-azure-az-305.html">MICROSOFTAZURE AZ-305</a></div>
        <div><a href="/certification/amazon aws/aws-saa-c03/lz-aws-saa-c03.html">AMAZON AWS SAA-C03</a></div>
      </div>
      <div>
        <div style="font-weight:800">DESTACADOS</div>
        <div><a href="/content/azure-identity-az104.html">Azure Â· Identidad y Acceso</a></div>
        <div><a href="/content/azure-network-security-az104.html">Azure Â· Seguridad en la red</a></div>
        <div><a href="/content/azure-cost-governance-az104.html">Azure Â· Coste y Gobernanza</a></div>
        <div><a href="/content/azure-landing-zone.html">Azure Â· Landing Zone</a></div>
        <div><a href="/content/aws-compute-elasticity-saac03.html">AWS Â· Elasticidad EC2</a></div>
      </div>
      <div>
        <div style="font-weight:800">COLABORADORES</div>
        ðŸ’¬ <span><a href="https://mundoazure.cloud" target="_blank">https://mundoazure.cloud</a></span><br><br>
        <div style="font-weight:800">CONTACTO</div>
        <button id="footerContactBtn" type="button"
                style="background:none;border:none;color:#cfe1ff;
                       font-weight:800;display:inline-flex;align-items:center;
                       gap:6px;cursor:pointer;padding:0;margin-top:6px;">
          ðŸ’¬ <span>ContÃ¡ctanos</span>
        </button>
      </div>
    </div>
    <div class="container" style="margin-top:12px;font-size:12px;">Â© <span id="y"></span> ITHub.es</div>
  </footer>

  <!-- Modal resultados -->
  <div class="modal" id="quizResultModal" aria-hidden="true" style="display:none;">
    <div class="modal-card">
      <h3>ðŸ“Š Resultados del examen</h3>
      <div id="quizScoreBox" class="panel" style="padding:12px;margin:0 0 12px;background:var(--surface2)">
        <strong id="quizScoreText">PuntuaciÃ³n</strong>
      </div>
      <div id="quizDomainsGrid" class="diag-grid"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button class="pill-btn" id="qrClose">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- Motor del simulador -->
  <script src="/control_quizs/Q_global_dark.js" defer></script>

  <script>
    // AÃ±o
    document.getElementById('y').textContent = new Date().getFullYear();

    /* ===== Helpers de sesiÃ³n ===== */
    function getCurrentUser(){
      try { return JSON.parse(localStorage.getItem("currentUser") || "null"); }
      catch { return null; }
    }
    function isLoggedIn(){ return !!getCurrentUser(); }

    /* ===== AUTH header (usado por includes/header.html) ===== */
    function renderHeaderAuth(){
      const u       = getCurrentUser();
      const login   = document.getElementById('btnLogin');
      const signup  = document.getElementById('btnSignup');
      const userArea= document.getElementById('userArea');
      const nameTop = document.getElementById('userNameTop');

      // Si el header aÃºn no estÃ¡ inyectado, salimos sin error
      if(!login || !signup){ return; }

      if(u){
        login.style.display  = 'none';
        signup.style.display = 'none';
        if(userArea){
          userArea.style.display='flex';
          if(nameTop){
            nameTop.textContent = (u.name || u.email || 'USER').toUpperCase();
          }
        }
      }else{
        login.style.display  = 'inline-flex';
        signup.style.display = 'inline-flex';
        if(userArea){ userArea.style.display='none'; }
      }
    }

    function localLogoutHook(){
      const btnLogout = document.getElementById('btnLogout');
      if(btnLogout){
        btnLogout.addEventListener('click', ()=>{
          localStorage.removeItem('currentUser');
          renderHeaderAuth();
          renderStartButton(); // sincroniza estado del botÃ³n al cerrar sesiÃ³n
        });
      }
    }

    /* ===== Tabs ===== */
    const tabSim   = document.getElementById('tabSim');
    const tabGuide = document.getElementById('tabGuide');
    const secSim   = document.getElementById('domsim');
    const secGuide = document.getElementById('studyGuide');

    function showSection(which){
      const isGuide  = which === 'guide';
      const isSim    = !isGuide;

      tabGuide.classList.toggle('active', isGuide);
      tabGuide.setAttribute('aria-selected', isGuide ? 'true' : 'false');

      tabSim.classList.toggle('active', isSim);
      tabSim.setAttribute('aria-selected', isSim ? 'true' : 'false');

      secGuide.style.display  = isGuide ? 'block' : 'none';
      secSim.style.display    = isSim ? 'block' : 'none';

      (isGuide ? secGuide : secSim).scrollIntoView({behavior:'smooth', block:'start'});
    }

    tabGuide.addEventListener('click', ()=>showSection('guide'));
    tabSim  .addEventListener('click', ()=>showSection('sim'));

    /* ===== Config AZ-104 ===== */
    const QUIZ = 'az-104';
    const CONFIG = {
      'az-104': {
        logo: 'https://upload.wikimedia.org/wikipedia/commons/a/a8/Microsoft_Azure_Logo.svg',
        blurb: 'Dominios oficiales de AZ-104 con notas rÃ¡pidas para el examen.',
        domains: [
          ['D1','Administrar identidades y gobierno (15â€“20%)'],
          ['D2','Implementar y administrar almacenamiento (15â€“20%)'],
          ['D3','Desplegar y administrar cÃ³mputo (20â€“25%)'],
          ['D4','Configurar y administrar redes (20â€“25%)'],
          ['D5','Monitorizar y mantener recursos (10â€“15%)']
        ]
      }
    };
    const DOMAIN_FILES = {
      'az-104': {
        D1:'/tips/azure-az104-tips-domain1.html',
        D2:'/tips/azure-az104-tips-domain2.html',
        D3:'/tips/azure-az104-tips-domain3.html',
        D4:'/tips/azure-az104-tips-domain4.html',
        D5:'/tips/azure-az104-tips-domain5.html'
      }
    };

    // Pintar dominios y chips
    const badgeLogo=document.getElementById('provLogo'),
          provText=document.getElementById('provText'),
          dlist=document.getElementById('domainsList'),
          chips=document.getElementById('domainChips'),
          startBtn=document.getElementById('startBtn'),
          qCount=document.getElementById('qCount'),
          infoDom=document.getElementById('infoDom'),
          infoTitle=document.getElementById('infoTitle'),
          infoContent=document.getElementById('infoContent'),
          view=document.getElementById('view');

    const cfg = CONFIG[QUIZ];
    badgeLogo.src = cfg.logo; badgeLogo.alt = 'Azure';
    provText.textContent = cfg.blurb;

    dlist.innerHTML = cfg.domains.map(([d,txt]) =>
      `<li class="dom-item" data-dn="${d}">
         <span class="dom-code">${d}</span>
         <span class="dom-title">${txt}</span>
       </li>`).join('');

    chips.innerHTML = cfg.domains.map(([d]) =>
      `<label class="chip-dom" data-dn="${d}">
         <input type="checkbox" value="${d}" hidden>
         <span class="led"></span> <span style="font-weight:900">${d}</span>
       </label>`).join('');

    function updateChipVisuals(){
      chips.querySelectorAll('.chip-dom').forEach(lbl=>{
        const cb = lbl.querySelector('input[type="checkbox"]');
        lbl.classList.toggle('on', !!cb.checked);
      });
    }
    chips.addEventListener('click', (ev)=>{
      const wrap = ev.target.closest('.chip-dom'); if(!wrap) return;
      const cb = wrap.querySelector('input[type="checkbox"]'); cb.checked = !cb.checked; updateChipVisuals();
    });
    updateChipVisuals();

    dlist.addEventListener('click', (ev)=>{
      const li = ev.target.closest('.dom-item'); if(!li) return;
      dlist.querySelectorAll('.dom-item').forEach(x=>x.classList.remove('active'));
      li.classList.add('active');
      loadDomainNotes(li.dataset.dn);
    });

    async function loadDomainNotes(domainCode){
      const map = DOMAIN_FILES[QUIZ]||{};
      const file = map[domainCode];
      infoTitle.textContent = `${domainCode} â€” Notas`;
      infoDom.style.display = 'block';
      infoContent.innerHTML = `<div class="info-empty">Cargando notasâ€¦</div>`;
      if(!file){
        infoContent.innerHTML = `<div class="info-empty">No hay archivo de notas para <b>${domainCode}</b>.</div>`;
        return;
      }
      try{
        const res = await fetch(file, {cache:'no-store'});
        const html = await res.text();
        const doc = new DOMParser().parseFromString(html, 'text/html');
        doc.querySelectorAll('script,link').forEach(n=>n.remove());
        const src = doc.querySelector('.wrap') || doc.body;
        infoContent.innerHTML = src ? src.innerHTML : html;
        infoDom.scrollIntoView({behavior:'smooth', block:'start'});
      }catch(e){
        infoContent.innerHTML = `<div class="info-empty">No se pudieron cargar las notas de <b>${domainCode}</b>.</div>`;
      }
    }
    document.getElementById('infoClose').addEventListener('click', ()=>{ infoDom.style.display='none'; });

    /* ====== Estado del botÃ³n START segÃºn sesiÃ³n ====== */
    function renderStartButton(){
      if (!startBtn) return;
      if (isLoggedIn()){
        startBtn.classList.remove('locked');
        startBtn.dataset.locked = "false";
        startBtn.innerHTML = 'â–¶ Empezar';
      }else{
        startBtn.classList.add('locked');
        startBtn.dataset.locked = "true";
        startBtn.innerHTML = '<span class="lock">ðŸ”’</span>Login to Start';
      }
      startBtn.disabled = false;
    }
    renderStartButton();

    // Simulador
    let quizActive = false;
    const headerEl = document.querySelector('header');
    function smoothScrollTo(el){
      if(!el) return;
      const rect = el.getBoundingClientRect();
      const offset = (headerEl?headerEl.offsetHeight:0)+10;
      const top = rect.top + window.scrollY - offset;
      window.scrollTo({ top, behavior:'smooth' });
    }
    function setQuizActive(on){
      quizActive = !!on;
      if (quizActive){
        startBtn.textContent = 'â³ En marchaâ€¦';
      }else{
        renderStartButton();
      }
      startBtn.setAttribute('aria-disabled', quizActive ? 'true' : 'false');
    }
    function waitForQuizMount(timeout=4000){
      return new Promise(resolve=>{
        if (view.children.length>0) return resolve();
        const obs = new MutationObserver(()=>{ if(view.children.length>0){ obs.disconnect(); resolve(); }});
        obs.observe(view,{childList:true});
        setTimeout(()=>{ obs.disconnect(); resolve(); }, timeout);
      });
    }
    window.addEventListener('quiz:started', ()=>{ setQuizActive(true); smoothScrollTo(document.querySelector('#view .question-card')||view); });
    window.addEventListener('quiz:ended',   ()=>{ setQuizActive(false); });

    startBtn.addEventListener('click', async ()=>{
      if (startBtn.dataset.locked === "true"){
        window.location.href = '/login/login.html';
        return;
      }
      if (quizActive) return;
      if (infoDom.style.display !== 'none') { infoDom.style.display='none'; }
      const count = parseInt(qCount.value,10) || 65;
      const tags = [];
      if(typeof window.start === 'function'){
        setQuizActive(true);
        window.start(QUIZ, { count, tags });
        await waitForQuizMount();
        smoothScrollTo(document.querySelector('#view .question-card')||view);
      }else{
        setQuizActive(false);
        alert('Motor de simulador no cargado.');
      }
    });

    /* ===== Nube de conceptos (datos) ===== */
    const CONCEPTS = [
      { key:'rbac',  title:'Identidad & RBAC (AZ-104)',  tip:'Entra ID, PIM, MFA y mÃ­nimo privilegio.', href:'/content/azure-identity-az104.html' },
      { key:'stnet', title:'Storage + Networking',        tip:'Redundancia, Azure Files/Blob, VNets, NSG y PE.', href:'/content/azure-az104-storage-network.html' },
      { key:'net',   title:'Seguridad de red',            tip:'NSG/ASG, UDR, Firewall y Private Endpoints.', href:'/content/azure-network-security-az104.html' },
      { key:'mon',   title:'MonitorizaciÃ³n',              tip:'Log Analytics, mÃ©tricas/alertas y action groups.', href:'/content/azure-monitoring-alerts-az104.html' },
      { key:'cost',  title:'Coste & Gobierno',            tip:'Budgets, tags, Azure Policy y locks.', href:'/content/azure-cost-governance-az104.html' },
      { key:'lz',    title:'Landing Zone',                tip:'CAF: suscripciones, polÃ­ticas base y RBAC.', href:'/content/azure-landing-zone.html' },
      { key:'worm',  title:'Backup inmutable',            tip:'WORM, cuentas aisladas, drills y vault.', href:'/content/immutable-backup-cyberrecovery.html' }
    ];
    function renderConceptCloud(){
      const cloud = document.getElementById('conceptCloud');
      cloud.innerHTML = CONCEPTS.map(c=>`
        <a role="listitem" class="chip-bubble" data-key="${c.key}" data-title="${c.title.toLowerCase()}" data-tip="${c.tip.toLowerCase()}" href="${c.href}">
          <span class="cb-title">${c.title}</span>
          <span class="cb-tip">${c.tip}</span>
          <span><span class="tiny-btn">Leer â†’</span></span>
        </a>
      `).join('');
    }
    function hookConceptSearch(){
      const input = document.getElementById('conceptSearch');
      const cloud = document.getElementById('conceptCloud');
      input.addEventListener('input', ()=>{
        const q = input.value.trim().toLowerCase();
        cloud.querySelectorAll('.chip-bubble').forEach(b=>{
          const hay = (b.dataset.title + ' ' + b.dataset.tip + ' ' + b.dataset.key);
          b.style.display = hay.includes(q) ? 'flex' : 'none';
        });
      });
    }
    renderConceptCloud();
    hookConceptSearch();

    /* ===== Resultados modal ===== */
    const qrModal = document.getElementById('quizResultModal');
    const qrClose = document.getElementById('qrClose');
    const qrGrid  = document.getElementById('quizDomainsGrid');
    const qrScore = document.getElementById('quizScoreText');
    function percent(a,b){ return b ? Math.round((a/b)*100) : 0; }
    function showResultsModal(data){
      const s = Number(data?.score||0), t = Number(data?.total||0);
      qrScore.textContent = `PuntuaciÃ³n: ${s}/${t} (${percent(s,t)}%)`;
      qrGrid.innerHTML = '';
      const byDom = data?.byDomain || null;
      if(byDom && Object.keys(byDom).length){
        Object.entries(byDom).forEach(([code,info])=>{
          const p = percent(info.correct, info.total);
          const card = document.createElement('div');
          card.className = 'panel';
          card.style.padding='12px';
          card.style.background='var(--surface2)';
          card.innerHTML = `
            <div style="font-weight:900;margin-bottom:6px">${info.name||code}</div>
            <div style="position:relative;height:10px;border-radius:999px;background:#0b1225;border:1px solid var(--stroke);overflow:hidden">
              <span style="position:absolute;left:0;top:0;height:100%;width:${p}%;background:${p<50?'#ff6b6b':(p<75?'#ffd66b':'#3ad97a')}"></span>
            </div>
            <div style="color:var(--muted);margin-top:6px">${info.correct}/${info.total} aciertos Â· ${p}%</div>
          `;
          qrGrid.appendChild(card);
        });
      }
      qrModal.classList.add('show');
      qrModal.style.display = 'flex';
    }
    qrClose.addEventListener('click', ()=>{ qrModal.classList.remove('show'); qrModal.style.display='none'; });
    qrModal.addEventListener('click', (e)=>{ if(e.target===qrModal){ qrModal.classList.remove('show'); qrModal.style.display='none'; } });
    window.quizResults = showResultsModal;
    window.addEventListener('quiz:results', (e)=> showResultsModal(e.detail||{}));
  </script>

  <script>
    // Cargar header comÃºn desde includes/header.html
    fetch('/includes/header.html')
      .then(r => r.text())
      .then(html => {
        const container = document.getElementById('site-header');
        if(!container) return;
        container.innerHTML = html;

        // Estado de sesiÃ³n en cabecera
        renderHeaderAuth();
        localLogoutHook();

        // Funciones globales del header (si existen)
        if (typeof attachHeaderEvents === 'function') {
          attachHeaderEvents();
        }
        if (typeof initSubmenus === 'function') {
          initSubmenus();
        }
      })
      .catch(err => {
        console.error('No se pudo cargar el header comÃºn:', err);
      });
  </script>
</body>
</html>
