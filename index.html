<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ITHub: Aprueba tus certificaciones IT · Aprende • Practica • Compite</title>

  <style>
    :root{
      --bg:#0f1320;--surface:#161b2d;--surface2:#1b2140;--ink:#e8ecff;--muted:#9ca8d9;
      --stroke:#283056;--brand:#6c8bff;--aws:#ff9900;--azure:#0078d4;
      --radius:14px;--shadow:0 12px 28px rgba(6,12,40,.45);
      --btn-bg:linear-gradient(180deg,#7a67ff,#5f48ff);--btn-ink:#fff;

      --pill-bg:linear-gradient(180deg,#151b31,#12182c);
      --pill-ring:#2a3150;
      --pill-btn-bg:linear-gradient(180deg,#7a67ff,#5f48ff);
      --pill-btn-bg-hover:linear-gradient(180deg,#8a78ff,#6b54ff);

      --cta-purple:linear-gradient(180deg,#6c8bff,#3e64ff);

      /* Colores barras de resultado */
      --ok:#3ad97a; --warn:#ffd66b; --bad:#ff6b6b;
    }

    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter,ui-sans-serif,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 420px at 90% -10%,rgba(255,153,0,.12),transparent 60%),
        radial-gradient(800px 400px at 10% 0%,rgba(0,120,212,.12),transparent 60%),
        var(--bg);
      line-height:1.6;overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:0 20px}

    /* ===== HEADER ===== */
    header{
      position:sticky;top:0;z-index:50;backdrop-filter:blur(10px);
      background:linear-gradient(180deg,rgba(15,19,32,.85),rgba(15,19,32,.55));
      border-bottom:1px solid var(--stroke)
    }
    .nav{height:64px;display:flex;align-items:center;justify-content:space-between;gap:10px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:900;text-transform:uppercase}
    .brand img.site-logo{height:26px;width:auto;display:block}
    .menu{display:flex;gap:12px;color:var(--muted);font-weight:800;align-items:center;text-transform:uppercase}
    .menu a.link-btn{
      display:inline-flex;align-items:center;justify-content:center;
      min-width:110px;height:40px;padding:0 12px;border-radius:10px;border:1px solid transparent;
      font-weight:900
    }
    .menu a.link-btn:hover{border-color:#2a3150;color:var(--ink)}

    .authwrap{
      display:flex;align-items:center;gap:6px;
      background:var(--pill-bg); border:1px solid var(--pill-ring);
      border-radius:999px; padding:4px; box-shadow:0 6px 18px rgba(5,10,30,.35);
      max-height:44px;
    }
    .hello{display:flex;align-items:center;gap:6px;color:#cbd3ff;font-weight:800;padding:4px 8px;font-size:12px}
    .pill-btn{
      display:inline-flex;align-items:center;justify-content:center;
      min-width:88px;height:34px;padding:0 12px;border-radius:10px;border:1px solid #3b2fff44;
      background:var(--pill-btn-bg); color:#fff; font-weight:900; cursor:pointer;
      transition:transform .08s ease, background .12s ease; font-size:13px;
      text-transform:uppercase;
    }
    .pill-btn:hover{background:var(--pill-btn-bg-hover); transform:translateY(-1px)}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      height:40px;padding:0 14px;border-radius:12px;border:1px solid var(--stroke);
      background:transparent;color:var(--ink);font-weight:900;cursor:pointer;
      text-transform:uppercase;
    }
    .btn:hover{border-color:#3a4580}

    @media (max-width:720px){
      .menu{gap:8px}
      .menu a.link-btn{min-width:90px;height:36px}
      .authwrap{gap:4px}
      .pill-btn{min-width:82px;height:32px;padding:0 10px}
      .btn{height:36px}
      .hello{display:none}
    }

    /* ===== Secciones ===== */
    .hero{padding:36px 0 14px;text-align:center}
    .hero h1{margin:0 0 4px;font-size:clamp(1.9rem,4.4vw,3.1rem)}
    .lead{color:var(--muted);max-width:900px;margin:6px auto 0}
    .hero-actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:12px}

    section{padding:26px 0}
    .sec-title{font-size:1.4rem;font-weight:900;margin-bottom:4px;text-transform:uppercase}
    .muted{color:var(--muted);font-size:.95rem}

    /* ===== Card simulador ===== */
    .grid{display:grid;gap:14px;margin-top:12px}
    @media(min-width:820px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:1140px){.grid{grid-template-columns:repeat(3,1fr)}}

    .sim-card{
      position:relative;
      background:linear-gradient(180deg,#111937,#0f1633);
      border:1px solid transparent;             /* usamos borde transparente para poder añadir “ring” */
      border-radius:18px;padding:16px;box-shadow:var(--shadow);
      display:flex;flex-direction:column;align-items:center;gap:10px;text-align:center;
      overflow:hidden;
    }
    /* Banda superior de color */
    .sim-card .accent{
      position:absolute;top:0;left:0;right:0;height:4px;opacity:.9;
    }
    /* Anillo/realce por proveedor */
    .sim-card.sim-azure{ box-shadow:0 0 0 1px rgba(0,120,212,.45) inset, 0 10px 26px rgba(0,120,212,.10), var(--shadow); }
    .sim-card.sim-aws{   box-shadow:0 0 0 1px rgba(255,153,0,.35) inset, 0 10px 26px rgba(255,153,0,.10), var(--shadow); }

    .prov-pill{
      display:inline-flex;align-items:center;justify-content:center;
      padding:8px 14px;border-radius:999px;font-weight:900;letter-spacing:.3px;
      border:1px solid rgba(255,255,255,.15); text-transform:uppercase
    }
    .prov-azure{background:rgba(0,120,212,.16);color:#cfe6ff;border-color:rgba(0,120,212,.35)}
    .prov-aws{background:rgba(255,153,0,.18);color:#ffe1b3;border-color:rgba(255,153,0,.35)}

    .sim-title{font-weight:900;font-size:1.05rem}
    .btns-row{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
    .cta-btn{
      display:inline-flex;align-items:center;gap:8px;justify-content:center;
      padding:10px 16px;border-radius:12px;border:0;background:var(--cta-purple);
      color:#fff;font-weight:900;cursor:pointer;box-shadow:0 10px 22px rgba(80,90,240,.25);
    }
    .cta-btn[aria-disabled="true"]{opacity:.65;cursor:not-allowed;filter:grayscale(.35)}

    /* Compactar ligeramente (sigue siendo legible) */
    .grid{ gap:10px; }
    .sim-card{ padding:14px; border-radius:16px; gap:10px; }
    .prov-pill{ padding:6px 12px; font-size:12px; }
    .sim-title{ font-size:.98rem; }

    /* ===== Centro de contenidos ===== */
    .filter-bar{
      display:flex;align-items:center;gap:10px;background:var(--surface2);
      border:1px solid var(--stroke);border-radius:12px;padding:12px 14px;margin-top:10px
    }
    .filter-bar label{font-weight:900;white-space:nowrap}
    .filter-bar select{
      appearance:none;background:#0f1630;border:1px solid var(--stroke);
      border-radius:10px;color:var(--ink);font-weight:800;padding:10px 12px;min-width:260px;
    }

    .carousel{position:relative;margin-top:12px}
    .track{
      display:grid;grid-template-columns:repeat(3, 1fr);gap:12px;min-height:420px;
      align-items:start;align-content:start;
    }
    .track.compact{min-height:auto;justify-content:center}
    @media(max-width:900px){ .track{grid-template-columns:repeat(2, 1fr)} }
    @media(max-width:560px){ .track{grid-template-columns:1fr} }
    .slide{display:none}
    .slide.show{display:block}
    .card{
      background:linear-gradient(180deg,#111937,#0f1633);border:1px solid var(--stroke);
      border-radius:14px;padding:14px;box-shadow:var(--shadow);
    }
    .cc-head{display:flex;align-items:center;gap:8px;margin-bottom:8px}
    .cc-meta{display:flex; align-items:center; gap:8px; color:var(--muted); font-size:.9rem;}
    .cc-meta .grow{ display:inline-flex; align-items:center; gap:8px; margin-right:auto; }
    .tiny-btn{
      display:inline-flex;align-items:center;justify-content:center;
      height:28px; padding:0 10px; border-radius:8px;
      border:1px solid #3b2fff44; background:var(--btn-bg);
      color:#fff; font-weight:900; cursor:pointer;white-space:nowrap;
    }

    .car-btn{
      position:absolute;top:45%;transform:translateY(-50%);
      width:44px;height:44px;border-radius:999px;border:1px solid rgba(0,0,0,.08);
      background:rgba(255,255,255,.95);color:#0f1320;font-weight:900;
      display:flex;align-items:center;justify-content:center;cursor:pointer;
      box-shadow:0 6px 18px rgba(0,0,0,.35);z-index:2
    }
    .car-btn[disabled]{opacity:.5;cursor:not-allowed}
    .car-prev{left:-10px}
    .car-next{right:-10px}

    /* ===== How & CTA (restaurado) ===== */
    .how-grid{display:grid;gap:10px;margin-top:12px}
    @media(min-width:820px){.how-grid{grid-template-columns:repeat(4,1fr)}}
    .how-step{background:var(--surface);border:1px solid var(--stroke);border-radius:12px;padding:14px}

    .cta{
      display:grid;grid-template-columns:1.1fr .9fr;gap:0;
      border:1px solid var(--stroke);border-radius:14px;overflow:hidden;background:var(--surface);margin-top:14px
    }
    @media(max-width:820px){.cta{grid-template-columns:1fr}}
    .cta .left{padding:18px}
    .cta .right{padding:18px;background:var(--surface2)}
    .tag{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:rgba(255,153,0,.12);border:1px solid rgba(255,153,0,.3);color:#ffd7a0;font-weight:800}

    /* ===== Modales ===== */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:120;padding:16px}
    .modal.show{display:flex}
    .modal-card{width:min(760px,100%);background:var(--surface);border:1px solid var(--stroke);border-radius:14px;padding:18px;box-shadow:var(--shadow)}
    .modal-card h3{margin:0 0 12px;font-size:1.2rem}
    .modal-card textarea, .modal-card input, .modal-card select{
      width:100%;border:1px solid var(--stroke);border-radius:10px;background:var(--surface2);color:var(--ink);padding:10px;font-weight:700
    }

    /* ===== Quiz ===== */
    .q-meta{display:flex;justify-content:space-between;align-items:center;color:#cbd3ff;font-weight:800;margin:0 0 8px}
    .q-block{background:var(--surface2);border:1px solid var(--stroke);border-radius:12px;padding:12px;overflow:hidden}
    .q-title{font-weight:900;margin:0 0 10px;font-size:1.05rem}
    .opt{
      display:grid; grid-template-columns:auto 1fr; column-gap:12px;
      align-items:start; margin:8px 0; padding:12px; border:1px solid var(--stroke);
      border-radius:12px; background:var(--surface); transition:background .12s, border-color .12s;
      width:100%; text-align:left;
    }
    .opt:hover{border-color:#3a4580}
    .opt input{margin-top:2px}
    .opt span{ line-height:1.45; white-space:normal; word-break:break-word; overflow-wrap:anywhere; }
    .opt.correct{border-color:rgba(58,217,122,.7);background:rgba(58,217,122,.07)}
    .opt.wrong{border-color:rgba(255,107,107,.7);background:rgba(255,107,107,.06)}

    /* ===== Barras de resultado (¡arreglado!) ===== */
    .meter{
      position:relative;height:10px;border-radius:999px;background:#0b1225;border:1px solid var(--stroke);overflow:hidden
    }
    .meter > span{
      position:absolute;left:0;top:0;height:100%;width:0;transition:width .4s ease;
      display:block;
    }
    .meter > .m-ok{background:var(--ok)}
    .meter > .m-warn{background:var(--warn)}
    .meter > .m-bad{background:var(--bad)}

    /* ===== Footer ===== */
    footer{border-top:1px solid var(--stroke);padding:24px 0;color:#9ca8d9;background:linear-gradient(180deg,rgba(22,27,45,.6),rgba(22,27,45,.2))}
    .f-grid{display:grid;gap:14px}
    @media(min-width:720px){.f-grid{grid-template-columns:1.2fr .8fr .8fr .8fr}}
    footer a{color:#cfe1ff} footer a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <!-- ===== CABECERA ===== -->
  <header>
    <div class="container nav">
      <div class="brand">
        <img class="site-logo" src="/assets/ithub-logo.svg" alt="ITHub logo">
      </div>

      <nav class="menu">
        <a class="link-btn" href="#simuladores">HOME</a>
        <a class="link-btn" href="#simuladores">SIMULADORES</a>
        <a class="link-btn" href="#contenidos">CONTENIDOS</a>
        <a class="link-btn" href="/score/ranking.html">RANKING</a>
      </nav>

      <div class="authwrap" id="authWrap">
        <a id="btnLogin"  class="pill-btn" href="/login/login.html">LOGIN</a>
        <a id="btnSignup" class="pill-btn" href="/login/login.html#signup">CREAR</a>

        <div id="userArea" style="display:none;align-items:center;gap:6px">
          <div class="hello">👋 <span id="userNameTop" style="font-weight:900">USER</span></div>
          <a class="pill-btn" href="/user/profile.html">PERFIL</a>
          <button id="btnLogout" class="pill-btn" type="button">SALIR</button>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <section class="hero">
    <div class="container">
      <h1>🎮 Aprende, practica y compite</h1>
      <p class="lead">Simula <strong>exámenes y certificaciones IT</strong> con preguntas centradas en aprobar. Sube tu nivel y mide tu progreso.</p>
      <div class="hero-actions">
        <a class="btn" href="/score/ranking.html">🏆 VER RANKING GLOBAL</a>
        <button class="btn" id="btnFeedback" type="button">💬 ENVIAR FEEDBACK</button>
      </div>
    </div>
  </section>

  <!-- ===== Cómo funciona + CTA (restaurado) ===== -->
  <section>
    <div class="container">
      <div class="sec-title">PLAN PARA APROBAR TU CERTIFICACIÓN IT</div>
      <div class="how-grid">
        <div class="how-step">
          <strong>1) Diagnóstico inicial</strong><br>
          <span class="muted">Mini-test por dominios. Prioriza dónde estudiar.</span>
          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
            <button class="pill-btn" id="btnOpenDiag">Iniciar diagnóstico</button>
            <button class="btn" id="btnViewDiag">Ver último resultado</button>
          </div>
        </div>
        <div class="how-step"><strong>2) Domina lo esencial</strong><br><span class="muted">Resúmenes y hojas de trucos por dominio. Solo lo que cae.</span></div>
        <div class="how-step"><strong>3) Practica con propósito</strong><br><span class="muted">Simulador con explicación y enlaces oficiales.</span></div>
        <div class="how-step"><strong>4) Ensayo final</strong><br><span class="muted">Modo examen cronometrado. Repite hasta tu objetivo.</span></div>
      </div>

      <div class="cta">
        <div class="left">
          <span class="tag">LANZAMOS NUESTRA BETA. ÚNETE!</span>
          <h2 style="margin:8px 0 6px;font-size:clamp(1.4rem,3.6vw,2rem)">Regístrate y aprueba tu certificación!</h2>
          <p class="muted">Guarda progreso, marca preguntas y recibe recomendaciones por dominio.</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
            <a class="pill-btn" href="/login/login.html?view=signup">CREAR CUENTA</a>
          </div>
        </div>
        <div class="right">
          <div>✅ <b>Análisis por dominio</b> tras cada intento</div>
          <div>✅ <b>Explicación + enlaces oficiales</b> en cada respuesta</div>
          <div>✅ <b>Preguntas marcadas</b> y repaso dirigido</div>
          <div>✅ <b>Objetivo semanal</b> de preguntas y racha</div>
          <div>✅ <b>Estadísticas</b> de acierto, tiempo y evolución</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Simuladores ===== -->
  <section id="simuladores">
    <div class="container">
      <div class="sec-title">SIMULADOR DE EXÁMENES (BETA)</div>
      <div class="muted">Modo estudio o examen cronometrado. Más simuladores pronto.</div>

      <div class="grid" id="simGrid"><!-- tarjetas renderizadas por JS --></div>
    </div>
  </section>

<!-- ===== Centro de contenidos ===== -->
<section id="contenidos">
  <div class="container">
    <div class="sec-title">CONTENIDO CLAVE POR CERTIFICACIÓN</div>
    <div class="muted">Solo lo esencial: resúmenes rápidos, hojas de trucos y guías prácticas enfocadas en el examen.</div>

    <div class="filter-bar">
      <label for="examSelect">Selecciona Certificación:</label>
      <select id="examSelect">
        <option value="all">TODAS</option>
        <option value="az-104">AZ-104 · Microsoft Azure Administrator</option>
        <option value="aws-saa-c03">SAA-C03 · AWS Solutions Architect Associate</option>
      </select>
    </div>

    <!-- Carrusel 2×3 -->
    <div class="carousel">
      <button class="car-btn car-prev" aria-label="Anterior">‹</button>
      <div class="track" id="contentTrack">
        
        <article class="card slide" data-exam="az-104">
          <div class="cc-head">🌐 <strong>VNet Peering vs. VPN Gateway</strong></div>
          <p class="muted">
            Aprende cuándo usar <strong>VNet Peering</strong> para baja latencia y cuándo elegir <strong>VPN Gateway</strong> 
            para cifrado y conectividad híbrida. Incluye topologías <em>hub-spoke</em> y buenas prácticas de examen.
          </p>
          <div class="cc-meta">
            <span class="grow"><span class="prov-pill prov-azure">AZURE</span><span>AZ-104</span></span>
            <a class="tiny-btn" href="content/vnet-peering-vpn.html">Leer</a>
          </div>
        </article>

        <article class="card slide" data-exam="az-104">
          <div class="cc-head">🔐 <strong>Checklist de seguridad Azure</strong></div>
          <p class="muted">
            Revisa <strong>RBAC mínimo</strong>, <strong>MFA</strong>, <strong>PIM</strong>, <strong>Azure Policy</strong> 
            y <strong>Defender for Cloud</strong> para reforzar la seguridad. Alineado con los dominios principales del examen AZ-104.
          </p>
          <div class="cc-meta">
            <span class="grow"><span class="prov-pill prov-azure">AZURE</span><span>AZ-104</span></span>
            <a class="tiny-btn" href="content/azure-security-checklist.html">Leer</a>
          </div>
        </article>

        <article class="card slide" data-exam="mixed">
          <div class="cc-head">💾 <strong>Backup inmutable y recuperación</strong></div>
          <p class="muted">
            Diseña un <strong>vault WORM</strong> con aislamiento, cuentas separadas y <em>drills</em> de prueba. 
            Comparativa Azure-AWS para proteger copias críticas frente a ransomware y ataques internos.
          </p>
          <div class="cc-meta">
            <span class="grow">
              <span class="prov-pill prov-azure">AZURE</span><span>AZ-104</span> ·
              <span class="prov-pill prov-aws">AWS</span><span>SAA-C03</span>
            </span>
            <a class="tiny-btn" href="content/immutable-backup-cyberrecovery.html">Leer</a>
          </div>
        </article>

        <article class="card slide" data-exam="aws-saa-c03">
          <div class="cc-head">🏗️ <strong>Alta disponibilidad en VPC</strong></div>
          <p class="muted">
            Crea VPC resilientes con <strong>subredes multi-AZ</strong>, <strong>Auto Scaling</strong>, 
            <strong>ALB</strong> y <strong>NAT Gateway</strong> redundantes. Diseños y errores comunes que suelen aparecer en SAA-C03.
          </p>
          <div class="cc-meta">
            <span class="grow"><span class="prov-pill prov-aws">AWS</span><span>SAA-C03</span></span>
            <a class="tiny-btn" href="content/aws-vpc-ha.html">Leer</a>
          </div>
        </article>

        <article class="card slide" data-exam="az-104">
          <div class="cc-head">🗂️ <strong>Azure Storage: claves rápidas</strong></div>
          <p class="muted">
            Domina <strong>SAS</strong>, <strong>RBAC</strong> y <strong>replicación LRS-GZRS</strong>. 
            Configura <strong>inmutabilidad</strong>, <strong>Private Endpoints</strong> y cifrado <strong>CMK</strong> 
            para aprobar el dominio de almacenamiento.
          </p>
          <div class="cc-meta">
            <span class="grow"><span class="prov-pill prov-azure">AZURE</span><span>AZ-104</span></span>
            <a class="tiny-btn" href="content/azure-storage-az104.html">Leer</a>
          </div>
        </article>

        <article class="card slide" data-exam="az-104">
          <div class="cc-head">🔗 <strong>Conectividad híbrida en Azure</strong></div>
          <p class="muted">
            Configura <strong>VPN S2S</strong> y <strong>ExpressRoute</strong> con <strong>BGP</strong>. 
            Diseña <em>hub-spoke</em> seguros con <strong>Azure Firewall</strong> y <strong>DNS privado</strong> para entornos híbridos.
          </p>
          <div class="cc-meta">
            <span class="grow"><span class="prov-pill prov-azure">AZURE</span><span>AZ-104</span></span>
            <a class="tiny-btn" href="content/azure-hybrid-connectivity-az305.html">Leer</a>
          </div>
        </article>

        <article class="card slide" data-exam="aws-saa-c03">
          <div class="cc-head">📦 <strong>S3: seguridad y rendimiento</strong></div>
          <p class="muted">
            Asegura buckets con <strong>bloqueo público</strong>, <strong>SSE-KMS</strong>, 
            <strong>versionado</strong> y políticas IAM. Optimiza rendimiento con multipart upload y <strong>Transfer Acceleration</strong>.
          </p>
          <div class="cc-meta">
            <span class="grow"><span class="prov-pill prov-aws">AWS</span><span>SAA-C03</span></span>
            <a class="tiny-btn" href="content/aws-s3-design-saac03.html">Leer</a>
          </div>
        </article>

        <article class="card slide" data-exam="aws-saa-c03">
          <div class="cc-head">📨 <strong>Patrones con SQS y SNS</strong></div>
          <p class="muted">
            Diseña colas <strong>FIFO</strong> y <strong>DLQ</strong> con <strong>SNS fan-out</strong> para 
            microservicios asíncronos. Usa reintentos, filtros y desacople efectivo entre productores y consumidores.
          </p>
          <div class="cc-meta">
            <span class="grow"><span class="prov-pill prov-aws">AWS</span><span>SAA-C03</span></span>
            <a class="tiny-btn" href="content/aws-sqs-sns-patterns.html">Leer</a>
          </div>
        </article>

      </div>
      <button class="car-btn car-next" aria-label="Siguiente">›</button>
    </div>
  </div>
</section>




  <!-- ===== Pie ===== -->
  <footer>
    <div class="container f-grid">
      <div>
        <div class="brand" style="text-transform:none">
          <span class="logo-pill" style="width:18px;height:34px;border-radius:10px;background:linear-gradient(180deg,#8aa0ff 0%,#425dff 100%);box-shadow:0 0 0 6px rgba(108,139,255,.18)"></span>
          <span>ITHub.es</span>
        </div>
        <p style="margin:8px 0 0;">Aprende, practica y aprueba tus certificaciones mientras compites con el resto del mundo. <br><br>Todo lo que necesitas en un sólo lugar.</p>
      </div>
      <div>
        <div style="font-weight:800">Simuladores</div>
        <div><a href="quiz.html?quiz=az-104">AZ-104</a></div>
        <div><a href="quiz.html?quiz=aws-saa-c03">SAA-C03</a></div>
      </div>
      <div>
        <div style="font-weight:800">Contenidos</div>
        <div><a href="content/azure-landing-zone.html">Azure · Landing Zone</a></div>
        <div><a href="content/azure-storage-az104.html">Azure · Storage (AZ-104)</a></div>
        <div><a href="content/azure-hybrid-connectivity-az305.html">Azure · Conectividad híbrida</a></div>
        <div><a href="content/aws-s3-design-saac03.html">AWS · S3 diseño</a></div>
        <div><a href="content/aws-sqs-sns-patterns.html">AWS · SQS & SNS</a></div>
      </div>
      <div>
        <div style="font-weight:800">Contacto</div>
        <div>infoweb(at)ithub.es</div>
      </div>
    </div>
    <div class="container" style="margin-top:12px;font-size:12px;">© <span id="y"></span> ITHub.es</div>
  </footer>

  <!-- ===== Modal Feedback ===== -->
  <div class="modal" id="feedbackModal" aria-hidden="true">
    <div class="modal-card">
      <h3>💬 ENVIAR FEEDBACK</h3>
      <p class="muted" style="margin:0 0 8px">Cuéntanos qué mejorar o qué funcionalidades quieres ver.</p>
      <input id="feedbackEmail" type="email" placeholder="Tu email (opcional)">
      <textarea id="feedbackText" placeholder="Escribe aquí tu sugerencia…"></textarea>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
        <button class="btn" id="btnCancelFeedback" type="button">CANCELAR</button>
        <button class="pill-btn" id="btnSendFeedback" type="button">ENVIAR</button>
      </div>
    </div>
  </div>

  <!-- ===== Modal Diagnóstico ===== -->
  <div class="modal" id="diagModal" aria-hidden="true">
    <div class="modal-card" style="max-height:88vh;overflow:auto">
      <h3>🧭 Mini-test Diagnóstico</h3>

      <!-- Setup -->
      <div id="diagSetup">
        <div class="setup-grid" style="display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center">
          <div>
            <label for="diagExam" style="font-weight:900">Selecciona examen</label>
            <select id="diagExam" style="margin:6px 0 6px">
              <option value="AZ-104">AZ-104 · Microsoft Azure Administrator</option>
              <option value="SAA-C03">SAA-C03 · AWS Solutions Architect Associate</option>
            </select>
          </div>
          <div class="right" style="text-align:right;color:var(--muted);font-weight:800">
            <label style="display:flex;gap:10px;align-items:center;justify-content:flex-end">
              <input id="diagImmediate" type="checkbox"> Mostrar corrección inmediata por pregunta
            </label>
          </div>
        </div>
        <p class="muted" style="margin:6px 0 10px">Se seleccionan 3 preguntas por dominio (4 dominios × 3 preguntas) y verás un resumen por dominios al finalizar.</p>
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:6px">
          <button class="btn" id="btnCloseDiag1" type="button">CANCELAR</button>
          <button class="pill-btn" id="btnStartDiag" type="button">COMENZAR (12 PREGUNTAS)</button>
        </div>
      </div>

      <!-- Quiz -->
      <div id="diagQuiz" style="display:none">
        <div class="q-meta">
          <div>Pregunta <span id="dqIndex">1</span>/<span id="dqTotal">12</span> · <span id="dqDomain"></span></div>
          <div class="muted" id="dqNote"></div>
        </div>
        <div class="q-block">
          <div class="q-title" id="dqTitle">...</div>
          <div id="dqOptions"></div>
        </div>
        <div style="display:flex;gap:8px;justify-content:space-between;margin-top:12px">
          <button class="btn" id="btnPrevQ" type="button">← ANTERIOR</button>
          <button class="pill-btn" id="btnNextQ" type="button">SIGUIENTE →</button>
        </div>
      </div>

      <!-- Resultados (solo modal) -->
      <div id="diagResult" style="display:none">
        <h4 style="margin:8px 0">Resultados por dominios</h4>
        <div class="diag-grid" id="diagGridModal" style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px"></div>
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
          <button class="btn" id="btnCloseDiag2" type="button">CERRAR</button>
          <button class="pill-btn" id="btnSaveDiag" type="button">GUARDAR EN MI PERFIL</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Año
    document.getElementById('y').textContent = new Date().getFullYear();

    // ===== AUTH =====
    function getCurrentUser(){ try{ return JSON.parse(localStorage.getItem("currentUser")||"null"); }catch{ return null; } }
    function isAuthed(){ return !!getCurrentUser(); }
    function renderHeaderAuth(){
      const u=getCurrentUser(); const login=document.getElementById('btnLogin');
      const signup=document.getElementById('btnSignup'); const userArea=document.getElementById('userArea');
      const nameTop=document.getElementById('userNameTop');
      if(u){ login.style.display='none'; signup.style.display='none'; userArea.style.display='flex'; nameTop.textContent=(u.name||u.email||'USER').toUpperCase(); }
      else{ login.style.display='inline-flex'; signup.style.display='inline-flex'; userArea.style.display='none'; }
    }
    document.getElementById('btnLogout')?.addEventListener('click', ()=>{ localStorage.removeItem('currentUser'); renderHeaderAuth(); renderSims(); });
    renderHeaderAuth();

    // ===== SIMULADORES =====
    const CATALOG = [
      {id:'AZ-104',provider:'MICROSOFT AZURE',title:'Administrator Associate',quiz:'az-104', providerClass:'prov-azure', simClass:'sim-azure', accent:'linear-gradient(90deg, rgba(0,120,212,.85), rgba(0,120,212,.35))'},
      {id:'SAA-C03',provider:'AMAZON AWS',title:'Solutions Architect Associate',quiz:'aws-saa-c03', providerClass:'prov-aws',   simClass:'sim-aws',   accent:'linear-gradient(90deg, rgba(255,153,0,.85), rgba(255,153,0,.35))'},
      {id:'AZ-305',provider:'MICROSOFT AZURE',title:'Architect Expert',quiz:'az-305', providerClass:'prov-azure', simClass:'sim-azure', accent:'linear-gradient(90deg, rgba(0,120,212,.85), rgba(0,120,212,.35))', comingSoon:true}
    ];
    const simGrid=document.getElementById('simGrid');

    function renderSims(){
      simGrid.innerHTML='';
      const authed = isAuthed();
      CATALOG.forEach(c=>{
        const el=document.createElement('article'); el.className=`sim-card ${c.simClass}`;
        const startLabel = c.comingSoon ? '⏳ Coming Soon' : (authed ? '▶ Empezar' : '🔒 Login to Start');
        const startHref  = c.comingSoon ? '#' : (authed ? `quiz.html?quiz=${c.quiz}` : '/login/login.html');
        const loginMsg = (authed || c.comingSoon) ? '' : `<div class="muted login-msg">Inicia sesión para comenzar este simulador.</div>`;
        el.innerHTML=`
          <span class="accent" style="background:${c.accent}"></span>
          <div class="prov-pill ${c.providerClass}">${c.provider}</div>
          <div class="sim-title">${c.id} ${c.title}</div>
          <div class="btns-row">
            ${c.comingSoon?'':`<a class="cta-btn" href="/score/ranking.html?quiz=${c.quiz}">🏆 Ranking</a>`}
            <a class="cta-btn ${c.comingSoon?'':'start-btn'}" ${c.comingSoon?'aria-disabled="true"':''} ${c.comingSoon?'':`data-quiz="${c.quiz}"`} href="${startHref}" ${c.comingSoon?'onclick="return false;"':''}>${startLabel}</a>
          </div>
          ${loginMsg}
        `;
        simGrid.appendChild(el);
      });
    }
    renderSims();

    document.addEventListener('click', e=>{
      const b=e.target.closest('.start-btn'); if(!b) return;
      if(isAuthed()){
        const url=new URL('quiz.html', location.href);
        url.searchParams.set('quiz', b.dataset.quiz);
        location.href=url.toString();
      }else{
        location.href='/login/login.html';
      }
    });

    // ===== Carrusel 2x3 con filtro y paginación =====
    const track = document.getElementById('contentTrack');
    const allSlides = Array.from(track.querySelectorAll('.slide'));
    const prevBtn = document.querySelector('.car-prev');
    const nextBtn = document.querySelector('.car-next');
    const select  = document.getElementById('examSelect');

    const PAGE_SIZE = 6; // 2 filas x 3 columnas
    let page = 0;
    let filter = 'all';

    function filteredSlides(){
      if(filter==='all') return allSlides;
      return allSlides.filter(s => s.dataset.exam === filter || s.dataset.exam === 'mixed');
    }
    function renderCarousel(){
      allSlides.forEach(s => s.classList.remove('show'));
      const items = filteredSlides();
      const start = page * PAGE_SIZE;
      const end   = Math.min(start + PAGE_SIZE, items.length);
      items.slice(start, end).forEach(s => s.classList.add('show'));
      track.classList.toggle('compact', (end-start) < PAGE_SIZE);
      prevBtn.disabled = (page === 0);
      nextBtn.disabled = (end >= items.length);
    }
    select.addEventListener('change', ()=>{ filter = select.value; page = 0; renderCarousel(); });
    prevBtn.addEventListener('click', ()=>{ if(page>0){ page--; renderCarousel(); }});
    nextBtn.addEventListener('click', ()=>{ const total = filteredSlides().length; if((page+1)*PAGE_SIZE < total){ page++; renderCarousel(); }});
    renderCarousel();

    // ===== Feedback modal (mock) =====
    const FEEDBACK_API = "https://tu-api-feedback.example.com/feedback"; // Sustituye por tu endpoint real
    const fbModal = document.getElementById('feedbackModal');
    document.getElementById('btnFeedback').addEventListener('click',()=>{ fbModal.classList.add('show'); document.getElementById('feedbackText').value=''; document.getElementById('feedbackEmail').value=''; });
    document.getElementById('btnCancelFeedback').addEventListener('click',()=> fbModal.classList.remove('show'));
    fbModal.addEventListener('click',e=>{ if(e.target===fbModal) fbModal.classList.remove('show'); });
    document.getElementById('btnSendFeedback').addEventListener('click', async ()=>{
      const message=(document.getElementById('feedbackText').value||'').trim();
      const from=(document.getElementById('feedbackEmail').value||'').trim();
      if(!message){ alert('Por favor, escribe tu sugerencia.'); return; }
      try{
        const res = await fetch(FEEDBACK_API, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ message, from, meta:{ path:location.href, ua:navigator.userAgent } })});
        if(!res.ok) throw new Error(await res.text());
        alert('¡Gracias! Tu feedback se ha enviado. 💜');
      }catch(err){ console.warn('Fallo envío mock:', err); }
      fbModal.classList.remove('show');
    });

    // ===== MINI-TEST DIAGNÓSTICO =====
    const DIAG_BANK=[
      { exam:"AZ-104", domain:"Identidades y gobernanza", q:"¿Qué servicio centraliza reglas de acceso a nivel de suscripción y grupos de recursos?", options:["Azure Policy","Azure Blueprints","RBAC (roles)","Privileged Identity Management"], answerIndex:2 },
      { exam:"AZ-104", domain:"Identidades y gobernanza", q:"Para asignar permisos temporales con aprobación, ¿qué usarías?", options:["Access Reviews","Privileged Identity Management (PIM)","Conditional Access","User Access Administrator"], answerIndex:1 },
      { exam:"AZ-104", domain:"Identidades y gobernanza", q:"¿Qué herramienta audita cambios en roles y asignaciones?", options:["Activity Log","Change Tracking","Azure Monitor Metrics","Network Watcher"], answerIndex:0 },
      { exam:"AZ-104", domain:"Almacenamiento", q:"¿Qué opción asegura WORM legalmente inmutable?", options:["Soft delete","Versioning","Immutable Blob (Time-based)","Geo-Redundancy"], answerIndex:2 },
      { exam:"AZ-104", domain:"Almacenamiento", q:"Para SMB con AD y cuotas, ¿qué servicio?", options:["Azure Files","Blob Hot","Azure Disk","Queue Storage"], answerIndex:0 },
      { exam:"AZ-104", domain:"Almacenamiento", q:"¿Qué nivel de redundancia ofrece mayor durabilidad sin salir de la región?", options:["LRS","ZRS","GRS","GZRS"], answerIndex:1 },
      { exam:"AZ-104", domain:"Cómputo", q:"Para VMs con actualizaciones coordinadas, zonas y escala, ¿qué usar?", options:["VM única","Virtual Machine Scale Sets","Availability Set","Dedicated Host"], answerIndex:1 },
      { exam:"AZ-104", domain:"Cómputo", q:"¿Qué imagen reduciría esfuerzo de mantenimiento?", options:["Gallery (SIG) con versión aprobada","Marketplace ad-hoc cada vez","Custom en disco suelto","Snapshots independientes"], answerIndex:0 },
      { exam:"AZ-104", domain:"Cómputo", q:"¿Cómo dar acceso temporal SSH a una VM sin abrir 22?", options:["JIT de Defender for Cloud","Azure Bastion con RDP","NSG allow any","Public IP temporal"], answerIndex:0 },
      { exam:"AZ-104", domain:"Red y conectividad", q:"¿Qué conectividad usarías para on-prem estable y SLA con BGP?", options:["Site-to-Site VPN","Point-to-Site VPN","ExpressRoute","VNet Peering"], answerIndex:2 },
      { exam:"AZ-104", domain:"Red y conectividad", q:"Para exponer web multizona con TLS y WAF gestionado:", options:["Azure Traffic Manager","Application Gateway","Front Door","Load Balancer"], answerIndex:2 },
      { exam:"AZ-104", domain:"Red y conectividad", q:"¿Cómo aislar subredes y filtrar nivel L7 centralmente?", options:["NSG + UDR","Azure Firewall o WAF en hub","Peering directo","Privatelink DNS"], answerIndex:1 },
      { exam:"SAA-C03", domain:"Diseño seguro", q:"Para secretos con rotación automática y KMS integrado:", options:["Secrets Manager","Parameter Store","S3 SSE-S3","CloudHSM"], answerIndex:0 },
      { exam:"SAA-C03", domain:"Diseño seguro", q:"Acceso a S3 sin Internet desde VPC:", options:["Gateway VPC Endpoint","Interface Endpoint","NAT Gateway","Internet Gateway"], answerIndex:0 },
      { exam:"SAA-C03", domain:"Diseño seguro", q:"MFA obligatorio para acceso a consola raíz:", options:["IAM Policy","SCP","AWS Organizations Tag Policy","No es posible"], answerIndex:1 },
      { exam:"SAA-C03", domain:"Alta disponibilidad y resiliencia", q:"Patrón para publicar eventos a muchos consumidores:", options:["FIFO queue","SNS fanout","S3 event bridge","Kinesis Data Firehose"], answerIndex:1 },
      { exam:"SAA-C03", domain:"Alta disponibilidad y resiliencia", q:"Base de datos multi-AZ con failover automático:", options:["RDS Multi-AZ","DynamoDB Global","Aurora Serverless v2","RDS Read Replica"], answerIndex:0 },
      { exam:"SAA-C03", domain:"Alta disponibilidad y resiliencia", q:"Subida de ficheros grandes con reintentos:", options:["S3 single PUT","Multipart upload","S3 Transfer Acceleration sin multipart","FTP en EC2"], answerIndex:1 },
      { exam:"SAA-C03", domain:"Rendimiento y escalabilidad", q:"Bajo milisegundo, millones RPS, esquema flexible:", options:["RDS MySQL","DynamoDB","Aurora PostgreSQL","Neptune"], answerIndex:1 },
      { exam:"SAA-C03", domain:"Rendimiento y escalabilidad", q:"CDN global con TLS y protección básica:", options:["ALB","CloudFront","Global Accelerator","NLB"], answerIndex:1 },
      { exam:"SAA-C03", domain:"Rendimiento y escalabilidad", q:"Procesamiento streaming con orden y reintentos:", options:["SQS Standard","SNS","Kinesis Data Streams","EventBridge"], answerIndex:2 },
      { exam:"SAA-C03", domain:"Coste y eficiencia", q:"Cargas batch oportunistas en EC2:", options:["On-Demand","Savings Plans","Spot","Dedicated Hosts"], answerIndex:2 },
      { exam:"SAA-C03", domain:"Coste y eficiencia", q:"Optimizar coste en S3 con datos fríos:", options:["SSE-KMS","Lifecycle hacia Glacier","Aumentar Replication","Habilitar versioning"], answerIndex:1 },
      { exam:"SAA-C03", domain:"Coste y eficiencia", q:"Reducir coste en DynamoDB con tráfico variable:", options:["Provisioned fijo","On-Demand (PAYG)","Índices globales para todo","Auto Scaling deshabilitado"], answerIndex:1 }
    ];

    function loadFromStorage(){ try{const raw=localStorage.getItem('diagnosticResults'); return raw?JSON.parse(raw):null;}catch{return null;} }
    function saveToStorage(data){ localStorage.setItem('diagnosticResults', JSON.stringify(data)); }

    // Modales diagnóstico
    const diagModal=document.getElementById('diagModal');
    const btnOpenDiag=document.getElementById('btnOpenDiag');
    const btnViewDiag=document.getElementById('btnViewDiag');

    const diagSetup=document.getElementById('diagSetup');
    const diagQuiz=document.getElementById('diagQuiz');
    const diagResult=document.getElementById('diagResult');

    const dqIndex=document.getElementById('dqIndex');
    const dqTotal=document.getElementById('dqTotal');
    const dqTitle=document.getElementById('dqTitle');
    const dqOptions=document.getElementById('dqOptions');
    const dqDomain=document.getElementById('dqDomain');
    const dqNote=document.getElementById('dqNote');
    const btnPrevQ=document.getElementById('btnPrevQ');
    const btnNextQ=document.getElementById('btnNextQ');

    let session={ exam:"AZ-104", immediate:false, questions:[], answers:[], i:0 };

    function pickQuestions(exam){
      const domains={"AZ-104":["Identidades y gobernanza","Almacenamiento","Cómputo","Red y conectividad"],
                     "SAA-C03":["Diseño seguro","Alta disponibilidad y resiliencia","Rendimiento y escalabilidad","Coste y eficiencia"]}[exam];
      const pool=DIAG_BANK.filter(x=>x.exam===exam); const out=[];
      domains.forEach(d=>{ const subset=pool.filter(x=>x.domain===d); for(let j=0;j<3 && j<subset.length;j++) out.push(subset[j]); });
      return out;
    }
    function percent(a,b){ return b? Math.round((a/b)*100):0; }

    function renderHeatmap(container, result){
      container.innerHTML='';
      Object.entries(result.byDomain).forEach(([dom,stat])=>{
        const p=percent(stat.correct, stat.total);
        const cls = p<50 ? 'm-bad' : (p<75 ? 'm-warn' : 'm-ok');
        const card=document.createElement('div');
        card.style.background='var(--surface2)'; card.style.border='1px solid var(--stroke)';
        card.style.borderRadius='12px'; card.style.padding='10px';
        card.innerHTML=`<h4 style="margin:0 0 6px;font-size:.95rem">${dom}</h4>
          <div class="meter"><span class="${cls}" style="width:${p}%"></span></div>
          <div class="muted" style="margin-top:6px">${stat.correct}/${stat.total} aciertos · ${p}%</div>`;
        container.appendChild(card);
      });
    }

    // Abrir/cerrar modal
    btnOpenDiag?.addEventListener('click',()=>{
      diagModal.classList.add('show');
      diagSetup.style.display='block'; diagQuiz.style.display='none'; diagResult.style.display='none';
    });
    btnViewDiag?.addEventListener('click',()=>{
      const data=loadFromStorage();
      if(!data){ alert('Aún no hay un mini-test guardado. Realiza uno para ver resultados.'); return; }
      diagModal.classList.add('show');
      diagSetup.style.display='none'; diagQuiz.style.display='none'; diagResult.style.display='block';
      renderHeatmap(document.getElementById('diagGridModal'), data);
    });
    document.getElementById('btnCloseDiag1')?.addEventListener('click',()=>diagModal.classList.remove('show'));
    document.getElementById('btnCloseDiag2')?.addEventListener('click',()=>diagModal.classList.remove('show'));
    diagModal.addEventListener('click',e=>{ if(e.target===diagModal) diagModal.classList.remove('show'); });

    // Comenzar
    document.getElementById('btnStartDiag')?.addEventListener('click',()=>{
      const exam=document.getElementById('diagExam').value;
      const immediate=document.getElementById('diagImmediate').checked;
      session={ exam, immediate, questions:pickQuestions(exam), answers:[], i:0 };
      dqTotal.textContent=session.questions.length;
      diagSetup.style.display='none'; diagQuiz.style.display='block'; diagResult.style.display='none';
      renderQuestion();
    });

    function styleImmediate(selected, correct){
      const labels=Array.from(dqOptions.querySelectorAll('.opt'));
      labels.forEach((l,ii)=>{
        l.classList.remove('correct','wrong');
        if(ii===correct) l.classList.add('correct');
        if(ii===selected && ii!==correct) l.classList.add('wrong');
      });
    }

    function renderQuestion(){
      const q=session.questions[session.i];
      dqIndex.textContent=session.i+1;
      dqTitle.textContent=q.q;
      dqDomain.textContent=q.domain;
      dqOptions.innerHTML='';
      q.options.forEach((t,idx)=>{
        const id='opt_'+session.i+'_'+idx;
        const wrap=document.createElement('label');
        wrap.className='opt';
        wrap.innerHTML=`<input type="radio" name="q${session.i}" id="${id}" value="${idx}"><span>${t}</span>`;
        dqOptions.appendChild(wrap);
      });
      dqNote.textContent = session.immediate ? 'Verás si aciertas al seleccionar.' : '';
      Array.from(dqOptions.querySelectorAll('input')).forEach(inp=>{
        inp.addEventListener('change',()=>{
          const chosen=Number(inp.value); session.answers[session.i]=chosen;
          if(session.immediate) styleImmediate(chosen, q.answerIndex);
        });
      });
      if(session.answers[session.i]!=null && session.immediate){
        styleImmediate(session.answers[session.i], q.answerIndex);
        dqOptions.querySelectorAll('input')[session.answers[session.i]].checked=true;
      }
      btnPrevQ.disabled = (session.i===0);
      btnNextQ.textContent = (session.i===session.questions.length-1) ? 'FINALIZAR' : 'SIGUIENTE →';
    }

    btnPrevQ?.addEventListener('click',()=>{ if(session.i>0){ session.i--; renderQuestion(); }});
    btnNextQ?.addEventListener('click',()=>{
      if(session.answers[session.i]==null){ if(!confirm('No has respondido. ¿Continuar?')) return; }
      if(session.i<session.questions.length-1){ session.i++; renderQuestion(); }
      else{ finishDiag(); }
    });

    function finishDiag(){
      const byDomain={};
      session.questions.forEach((q,idx)=>{
        const d=q.domain; if(!byDomain[d]) byDomain[d]={correct:0,total:0};
        byDomain[d].total++; if(session.answers[idx]===q.answerIndex) byDomain[d].correct++;
      });
      const result={ exam:session.exam, byDomain, when:Date.now() };
      renderHeatmap(document.getElementById('diagGridModal'), result);
      diagQuiz.style.display='none'; diagResult.style.display='block';
      document.getElementById('btnSaveDiag').onclick=()=>{ saveToStorage(result); alert('Guardado en tu perfil local.'); };
    }
  </script>
</body>
</html>
