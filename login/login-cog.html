<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>Login ¬∑ ITHub.es</title>
  <meta name="description" content="Inicia sesi√≥n o reg√≠strate en ITHub.es usando Amazon Cognito para guardar tu progreso y resultados de ex√°menes." />
  <meta name="robots" content="noindex,nofollow" />

  <link rel="icon" type="image/svg+xml" 
    href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><defs><linearGradient id='g' x1='0' y1='0' x2='0' y2='1'><stop stop-color='%238aa0ff'/><stop offset='1' stop-color='%23425dff'/></linearGradient></defs><rect rx='12' width='64' height='64' fill='url(%23g)'/><text x='32' y='42' font-family='Segoe UI,Arial' font-size='28' fill='white' font-weight='900' text-anchor='middle'>IT</text></svg>">

  <style>
    :root{
      --bg:#0f1320;--surface:#151a30;--surface2:#1b2140;--ink:#e8ecff;--muted:#9ca8d9;
      --stroke:#283056;--accent:#6c8bff;--accent-2:#3e64ff;
      --radius:18px;--shadow:0 18px 40px rgba(6,12,40,.65);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      background:
        radial-gradient(900px 420px at 90% -10%,rgba(255,153,0,.12),transparent 60%),
        radial-gradient(800px 400px at 10% 0%,rgba(0,120,212,.12),transparent 60%),
        var(--bg);
      color:var(--ink);
      line-height:1.6;
    }
    a{color:#cfe1ff;text-decoration:none}
    a:hover{text-decoration:underline}

    header{
      position:sticky;top:0;z-index:10;
      backdrop-filter:blur(10px);
      background:linear-gradient(180deg,rgba(15,19,32,.9),rgba(15,19,32,.6));
      border-bottom:1px solid var(--stroke);
    }
    .wrap{max-width:960px;margin:0 auto;padding:18px 20px;}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:16px;}
    .brand{display:flex;align-items:center;gap:10px;font-weight:900;font-size:1.05rem;}
    .brand-pill{
      width:36px;height:36px;border-radius:999px;
      background:linear-gradient(180deg,#8aa0ff,#425dff);
      box-shadow:0 0 0 6px rgba(108,139,255,.22);
    }
    .menu{display:flex;gap:16px;font-size:.9rem;color:var(--muted);font-weight:700;}
    .menu a{color:inherit;text-decoration:none;text-transform:uppercase;letter-spacing:.08em;}
    .menu a:hover{color:#fff;}

    .page{max-width:960px;margin:0 auto;padding:26px 20px 32px;}
    .card{
      background:radial-gradient(circle at 0% 0%,rgba(108,139,255,.35),transparent 50%),
                 radial-gradient(circle at 100% 100%,rgba(255,153,0,.26),transparent 55%),
                 linear-gradient(180deg,#111937,#0f1531);
      border-radius:var(--radius);
      border:1px solid rgba(255,255,255,.05);
      box-shadow:var(--shadow);
      padding:26px 20px 24px;
    }

    .card-inner{ max-width:780px;margin:0 auto; }

    .tabs{
      display:inline-flex;
      padding:5px;
      border-radius:999px;
      background:rgba(21,27,51,.9);
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 10px 24px rgba(5,10,30,.55);
    }
    .tab-btn{
      appearance:none;
      border:none;
      background:transparent;
      color:var(--muted);
      font-weight:800;
      font-size:.92rem;
      padding:8px 18px;
      border-radius:999px;
      cursor:pointer;
      text-transform:uppercase;
      letter-spacing:.08em;
      min-width:120px;
    }
    .tab-btn.active{
      background:linear-gradient(180deg,#ffffff,#cfd6ff);
      color:#141833;
      box-shadow:0 10px 22px rgba(0,0,0,.45);
    }

    h1{
      margin:18px 0 6px;
      font-size:1.8rem;
      font-weight:900;
    }
    .hint{color:var(--muted);margin:0 0 18px;font-size:.98rem;max-width:720px;}

    .big-btn{
      width:100%;
      margin-top:12px;
      border-radius:999px;
      padding:16px 18px;
      border:none;
      cursor:pointer;
      font-size:1rem;
      font-weight:900;
      text-align:center;
      background:linear-gradient(180deg,#6c8bff,#3e64ff);
      color:#fff;
      box-shadow:0 16px 40px rgba(80,90,240,.45);
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    .big-btn span.emoji{font-size:1.2rem;}
    .big-btn:hover{
      background:linear-gradient(180deg,#7a96ff,#4b71ff);
      transform:translateY(-1px);
    }

    .secondary-btn{
      margin-top:18px;
      width:100%;
      border-radius:999px;
      padding:12px 16px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(12,16,35,.85);
      color:#cfe1ff;
      font-weight:800;
      cursor:pointer;
      text-align:center;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
    }
    .secondary-btn:hover{
      border-color:#3a4680;
      background:rgba(17,23,52,.95);
    }

    .foot-note{
      margin-top:14px;
      font-size:.85rem;
      color:var(--muted);
    }

    .hidden{display:none !important;}

    @media (max-width:680px){
      .card{padding:20px 16px;}
      .tabs{width:100%;justify-content:space-between;}
      .tab-btn{flex:1;min-width:auto;padding:8px 12px;font-size:.85rem;}
    }
  </style>
</head>
<body>

<header>
  <div class="wrap nav">
    <div class="brand">
      <span class="brand-pill" aria-hidden="true"></span>
      <span>ITHub.es</span>
    </div>
    <nav class="menu" aria-label="Navegaci√≥n principal">
      <a href="/">Home</a>
      <a href="/index.html#simuladores">Simuladores</a>
      <a href="/score/ranking.html">Ranking</a>
    </nav>
  </div>
</header>

<main class="page">
  <section class="card" aria-labelledby="loginTitle">
    <div class="card-inner">
      <div class="tabs" role="tablist" aria-label="Cambiar entre login y registro">
        <button id="tabLogin"  class="tab-btn active" role="tab" aria-selected="true">Login</button>
        <button id="tabSignup" class="tab-btn"         role="tab" aria-selected="false">Registro</button>
      </div>

      <!-- CONTENIDO LOGIN -->
      <div id="panelLogin">
        <h1 id="loginTitle">Iniciar sesi√≥n</h1>
        <p class="hint">
          Te llevaremos a una p√°gina segura de Amazon Cognito para validar tu email.
          Al volver, tu sesi√≥n quedar√° iniciada en ITHub.es y podr√°s guardar resultados, ranking y progreso.
        </p>

        <button class="big-btn" type="button" id="btnLoginCognito">
          <span class="emoji">üëâ</span>
          <span>Continuar con tu cuenta</span>
        </button>

        <button class="secondary-btn" type="button" id="btnForgot">
          <span>He olvidado mi contrase√±a</span>
        </button>

        <p class="foot-note">
          ¬øNuevo por aqu√≠? Cambia a la pesta√±a <strong>Registro</strong> para crear tu cuenta.
        </p>
      </div>

      <!-- CONTENIDO REGISTRO -->
      <div id="panelSignup" class="hidden" aria-labelledby="signupTitle">
        <h1 id="signupTitle">Crear cuenta</h1>
        <p class="hint">
          Crearemos tu usuario en Cognito usando tu email y un <b>nombre p√∫blico</b>. 
          Solo necesitas confirmar la cuenta y, a partir de ah√≠, usaremos ese usuario para tus simuladores, ranking y quizzes.
        </p>

        <button class="big-btn" type="button" id="btnSignupCognito">
          <span class="emoji">‚ú®</span>
          <span>Crear mi cuenta en Cognito</span>
        </button>

        <p class="foot-note">
          Ya tengo usuario: vuelve a la pesta√±a <strong>Login</strong> para iniciar sesi√≥n.
        </p>
      </div>
    </div>
  </section>
</main>

<script>
  // =========================
  //   CONFIG COGNITO (DELUXE)
  // =========================

  const COGNITO_DOMAIN = "https://eu-central-1iqmrkcwly.auth.eu-central-1.amazoncognito.com";

  // Mismos par√°metros que tu enlace que s√≠ funciona
  const COGNITO_QUERY =
    "client_id=592bh3ek4jdeg78qntt810g7vl" +
    "&redirect_uri=" +
    "https://www.ithub.es%2Flogin%2Fcognito-callback.html" +
    "&response_type=code" +
    "&scope=email+openid+profile";

  const COGNITO_LOGIN_URL   = `${COGNITO_DOMAIN}/login?${COGNITO_QUERY}`;
  const COGNITO_SIGNUP_URL  = `${COGNITO_DOMAIN}/signup?${COGNITO_QUERY}`;
  const COGNITO_FORGOT_URL  = `${COGNITO_DOMAIN}/forgotPassword?${COGNITO_QUERY}`;

  // =========================
  //   TABS
  // =========================
  const tabLogin   = document.getElementById("tabLogin");
  const tabSignup  = document.getElementById("tabSignup");
  const panelLogin = document.getElementById("panelLogin");
  const panelSignup= document.getElementById("panelSignup");

  function showTab(which){
    const isSignup = which === "signup";
    tabLogin.classList.toggle("active", !isSignup);
    tabSignup.classList.toggle("active", isSignup);
    tabLogin.setAttribute("aria-selected", String(!isSignup));
    tabSignup.setAttribute("aria-selected", String(isSignup));
    panelLogin.classList.toggle("hidden", isSignup);
    panelSignup.classList.toggle("hidden", !isSignup);
  }

  tabLogin.addEventListener("click", () => showTab("login"));
  tabSignup.addEventListener("click", () => showTab("signup"));

  // soportar /login/login-cog.html#signup o ?view=signup
  document.addEventListener("DOMContentLoaded", () => {
    const hash = (location.hash || "").toLowerCase();
    const params = new URLSearchParams(location.search);
    const view = (params.get("view") || "").toLowerCase();
    const wantsSignup = hash === "#signup" || view === "signup" || view === "register";
    showTab(wantsSignup ? "signup" : "login");
  });

  // =========================
  //   ACCIONES COGNITO
  // =========================
  document.getElementById("btnLoginCognito").addEventListener("click", () => {
    window.location.href = COGNITO_LOGIN_URL;
  });

  document.getElementById("btnSignupCognito").addEventListener("click", () => {
    window.location.href = COGNITO_SIGNUP_URL;
  });

  document.getElementById("btnForgot").addEventListener("click", () => {
    window.location.href = COGNITO_FORGOT_URL;
  });
</script>

</body>
</html>
