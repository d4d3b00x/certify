<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ITHub Arena ‚Äî Misiones rel√°mpago 3√ó2 (AZ-104, AZ-305, SAA-C03)</title>
<meta name="description" content="Arena 3x2 de misiones rel√°mpago. Responde, gana XP y diamantes, completa tu objetivo semanal y escala en el ranking. Simuladores AZ-104, AZ-305 y SAA-C03." />
<meta name="theme-color" content="#0b0f1e" />
<link rel="icon" type="image/svg+xml" 
href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><defs><linearGradient id='g' x1='0' y1='0' x2='0' y2='1'><stop stop-color='%238aa0ff'/><stop offset='1' stop-color='%23425dff'/></linearGradient></defs><rect rx='12' width='64' height='64' fill='url(%23g)'/><text x='32' y='42' font-family='Segoe UI,Arial' font-size='28' fill='white' font-weight='900' text-anchor='middle'>IT</text></svg>">

<style>
:root{
  --bg:#0b0f1e;--panel:#0f1530;--panel2:#121a3b;--line:#26305e;--ink:#e8edff;--muted:#9fb2ff;
  --accent:#7e6bff;--ok:#38d97a;--warn:#ffd86a;--bad:#ff7272;--dia:#7dd3ff;
  --radius:14px;--shadow:0 16px 40px rgba(6,12,40,.45);
  --chip:#0f1736;--chipLine:#324081;
}

*{box-sizing:border-box}
html,body{
  margin:0;
  background:
    radial-gradient(1200px 600px at 80% -10%, rgba(126,107,255,.14),transparent 60%),
    radial-gradient(900px 500px at 0% -20%, rgba(124,212,255,.14),transparent 60%),
    var(--bg);
  color:var(--ink);
  font-family:Inter, ui-sans-serif, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* Header (no flotante) */
header{background:#0e1328;border-bottom:1px solid var(--line);}
.nav{max-width:1200px;margin:0 auto;display:flex;gap:14px;align-items:center;justify-content:space-between;padding:12px 18px}
.brand{display:flex;align-items:center;gap:10px;font-weight:900}
.brand .logo{width:30px;height:30px;border-radius:10px;background:linear-gradient(180deg,#8aa0ff,#425dff);box-shadow:0 0 0 8px rgba(130,150,255,.14)}
.nav-right{display:flex;gap:10px;align-items:center;}
.badge{padding:8px 12px;border-radius:999px;border:1px solid #2b356a;background:#10183a;font-weight:900;display:inline-flex;align-items:center;gap:8px;}
.badge .dot{width:8px;height:8px;border-radius:999px;background:#7de1ff}
.user{padding:8px 12px;border-radius:12px;border:1px solid #2b356a;background:#10183a;font-weight:900}

/* Contenedor */
.container{max-width:1200px;margin:0 auto;padding:18px}

/* T√≠tulo */
h1{margin:8px 0 6px;font-size:clamp(1.6rem,3.2vw,2.4rem);line-height:1.2}
.lead{color:var(--muted);margin:0 0 14px}

/* Tablero + ranking */
.layout{display:grid;grid-template-columns:1fr 320px;gap:16px}
@media(max-width:980px){.layout{grid-template-columns:1fr}}

/* Paneles */
.panel{background:linear-gradient(180deg,var(--panel),#0e1533);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow);overflow:hidden}

/* Encabezado panel arena */
.panel-head{display:flex;align-items:center;gap:12px;flex-wrap:wrap;padding:12px;border-bottom:1px solid var(--line);background:var(--panel2)}
.title-chip{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:999px;border:1px solid var(--chipLine);background:var(--chip);font-weight:900}
.title-chip .sword{filter:drop-shadow(0 6px 10px rgba(130,150,255,.2));font-size:18px}

/* Filtros en una l√≠nea (claros) */
.filters{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.filter{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--chipLine);background:linear-gradient(180deg,#0f1736,#121d48);border-radius:999px;font-weight:900;cursor:pointer;user-select:none;color:#dfe7ff;font-size:.92rem}
.filter:hover{border-color:#5a72ff}
.filter.active{background:linear-gradient(180deg,#7a8cff,#5b6dff);color:#fff;border-color:#6f82ff;box-shadow:0 10px 22px rgba(80,95,255,.25)}

/* Objetivo semanal (m√°s protagonista) */
.goal{display:flex;align-items:center;gap:10px;margin-left:auto;flex:1;justify-content:flex-end;flex-wrap:wrap}
.goal-pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--chipLine);background:var(--chip);border-radius:999px;padding:8px 12px;font-weight:900}
.prog{position:relative;width:clamp(260px, 48vw, 560px);height:16px;border-radius:999px;background:#0b1028;border:1px solid var(--line);overflow:hidden;box-shadow:0 0 0 6px rgba(80,95,255,.08) inset}
.prog>span{position:absolute;left:0;top:0;height:100%;width:0;background:linear-gradient(90deg,#49e08d,#76f4bc);transition:width .35s ease}
.prog em{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:900;font-style:normal;color:#eafff6;text-shadow:0 1px 0 #0a0f28}

/* ====== TARJETA COMPACTA ====== */
/* Grid 3x2 ‚Äì m√°s compacto */
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;padding:10px}
@media(max-width:980px){.grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:620px){.grid{grid-template-columns:1fr}}

.card{
  position:relative;background:linear-gradient(180deg,#10183a,#0f1736);border:1px solid var(--line);
  border-radius:12px;padding:10px;min-height:130px;display:grid;grid-template-rows:auto auto 1fr auto;row-gap:8px;
  transition:transform .18s ease, box-shadow .18s ease
}
.card:hover{transform:translateY(-2px);box-shadow:0 12px 22px rgba(20,30,70,.32)}
.card .meta-row{display:flex;align-items:center;gap:6px;flex-wrap:nowrap;overflow:hidden}
.chip{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid var(--chipLine);background:var(--chip);font-weight:900;white-space:nowrap;font-size:.85rem}
.cert{color:#cfe4ff}
.xp::before{content:"‚ö°"}
.dia::before{content:"üíé"}
.tit{font-weight:900;font-size:.98rem}
.desc{color:var(--muted);font-size:.9rem}
.play{margin-top:0;display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:8px 12px;height:36px;border-radius:10px;border:1px solid #4655a8;background:linear-gradient(180deg,#6677ff,#5a6df7);color:#fff;font-weight:900;cursor:pointer;font-size:.92rem}
.play[disabled]{opacity:.55;cursor:not-allowed;filter:grayscale(.6)}

/* Estado ganado + cinta */
.card.won{outline:2px solid rgba(56,217,122,.7);box-shadow:0 0 0 6px rgba(56,217,122,.15) inset}
.ribbon{position:absolute;right:-32px;bottom:14px;transform:rotate(-12deg);background:#3be180;color:#05361c;font-weight:900;padding:6px 30px;border-radius:10px;border:2px solid rgba(0,0,0,.15);box-shadow:0 8px 18px rgba(0,0,0,.25);display:none;font-size:.9rem}
.card.won .ribbon{display:block}

/* Salida de tarjeta y entrada */
.card.out{opacity:0;transform:scale(.92) translateY(8px);transition:opacity .35s ease, transform .35s ease}
.card.new{animation:pop .35s ease}
@keyframes pop{0%{opacity:0;transform:scale(.9)} 100%{opacity:1;transform:scale(1)}}

/* Modal misi√≥n */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:50}
.modal.show{display:flex}
.modal-card{width:min(800px,92vw);max-height:86vh;overflow:auto;background:var(--panel2);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow);padding:18px}
.mhead{display:flex;justify-content:space-between;align-items:center;gap:14px;margin-bottom:10px}
.close{border:1px solid var(--line);background:#182152;color:#cfe1ff;border-radius:10px;padding:8px 12px;font-weight:900;cursor:pointer}
.qbox{background:#0f1736;border:1px solid var(--line);border-radius:12px;padding:14px}
.qtitle{font-weight:900;margin:0 0 10px}
.opt{display:grid;grid-template-columns:auto 1fr;column-gap:10px;align-items:start;margin:8px 0;padding:10px;border:1px solid var(--line);border-radius:10px;background:#0e1633;cursor:pointer}
.opt:hover{border-color:#3a4998}
.opt.correct{background:rgba(56,217,122,.10);border-color:rgba(56,217,122,.7)}
.opt.wrong{background:rgba(255,114,114,.10);border-color:rgba(255,114,114,.7)}
.meta-row-inline{display:flex;gap:8px;align-items:center;margin-bottom:10px}

/* Ranking lateral */
.ranking{padding:12px}
.rtitle{display:flex;align-items:center;gap:10px;font-weight:900;margin-bottom:8px}
.rlist{display:grid;gap:8px}
.rrow{display:grid;grid-template-columns:28px 1fr auto;gap:8px;align-items:center;background:#0f1736;border:1px solid var(--line);border-radius:12px;padding:8px 10px}
.rrow.me{outline:2px solid rgba(124,212,255,.5)}
.rname{font-weight:800}
.rpts{display:inline-flex;align-items:center;gap:8px;background:#12204c;border:1px solid #3856a8;border-radius:999px;padding:6px 10px;font-weight:900}

/* Pie explicaci√≥n */
.rules{margin-top:16px;padding:16px;background:linear-gradient(180deg,#0e1533,#0d1431);border:1px solid var(--line);border-radius:16px}
.rules h3{margin:0 0 8px}
.rules ul{margin:0;padding-left:18px;color:#cbd6ff}

/* util */
.hide{display:none !important}
</style>
</head>
<body>

<header>
  <div class="nav">
    <div class="brand">
      <span class="logo"></span>
      <span>IT <strong>Hub</strong> .es</span>
    </div>
    <div class="nav-right">
      <span class="badge"><span class="dot"></span> Arena</span>
      <span class="badge">Lv. 3</span>
      <span class="badge">üíé 32</span>
      <span class="badge">üî• 2d</span>
      <span class="user">BALLESTER21</span>
    </div>
  </div>
</header>

<main class="container">
  <h1>Arena 3√ó2 ‚Äî Misiones rel√°mpago</h1>
  <p class="lead">Acierta para ganar <b>XP</b> y <b>diamantes</b>. Cada casilla superada <i>se sustituye</i> por una nueva misi√≥n.</p>

  <div class="layout">
    <!-- ARENA -->
    <section class="panel" id="arena">
      <div class="panel-head">
        <div class="title-chip"><span class="sword">‚öîÔ∏è</span> Arena ‚Äî Tablero 3√ó2</div>

        <div class="filters" id="filters">
          <button class="filter active" data-cert="ALL">Todos</button>
          <button class="filter" data-cert="AZ-104">AZ-104</button>
          <button class="filter" data-cert="AZ-305">AZ-305</button>
          <button class="filter" data-cert="SAA-C03">SAA-C03</button>
        </div>

        <div class="goal">
          <div class="goal-pill">üéØ <span id="goalTxt">25 / 70</span></div>
          <div class="prog" aria-label="Objetivo semanal">
            <span id="goalBar" style="width:36%"></span>
            <em id="goalPct">36%</em>
          </div>
          <button id="btnReset" class="filter">RESET</button>
        </div>
      </div>

      <div class="grid" id="grid"><!-- tarjetas --></div>
    </section>

    <!-- RANKING -->
    <aside class="panel">
      <div class="ranking">
        <div class="rtitle">üèÜ Ranking tiempo real (üíé)</div>
        <div class="rlist" id="rlist"><!-- filas --></div>
      </div>
    </aside>
  </div>

  <section class="rules panel">
    <div style="padding:12px">
      <h3>¬øC√≥mo se juega?</h3>
      <ul>
        <li>El tablero tiene <b>6 casillas</b> (3√ó2). Cada casilla es una <b>misi√≥n</b> de 1 pregunta.</li>
        <li>Si aciertas: <b>+10 XP</b> y <b>+2 üíé</b>. La tarjeta se marca como <b>SUPERADA</b>, hace una animaci√≥n y <b>se reemplaza</b> por una nueva.</li>
        <li>Si fallas: puedes reintentarlo m√°s tarde (rotaci√≥n de misiones).</li>
        <li>Cumple el <b>objetivo semanal</b> (70 preguntas) para obtener un <b>bonus</b> de diamantes.</li>
      </ul>
      <h3 style="margin-top:12px">XP, diamantes y niveles</h3>
      <ul>
        <li><b>XP</b>: sube tu <b>nivel</b> y desbloquea retos/insignias.</li>
        <li><b>Diamantes üíé</b>: moneda competitiva para ranking y canjes.</li>
        <li><b>Niveles</b>: subes autom√°ticamente al alcanzar el XP objetivo; los diamantes no se consumen.</li>
      </ul>
    </div>
  </section>
</main>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="mTitle">
    <div class="mhead">
      <div class="meta-row-inline">
        <span class="chip cert" id="mCert">AZ-104</span>
        <span class="chip xp">+10 XP</span>
        <span class="chip dia">+2</span>
      </div>
      <button class="close" id="mClose">CERRAR</button>
    </div>
    <div class="qbox">
      <h3 class="qtitle" id="mTitle">...</h3>
      <div id="mOpts"></div>
    </div>
  </div>
</div>

<script>
/* ===== DATA ===== */
const MISSIONS = [
  {cert:"AZ-104", domain:"Identidades", q:"¬øQu√© servicio centraliza reglas de acceso a nivel de suscripci√≥n / grupo de recursos?", opts:["Azure Policy","Azure Blueprints","RBAC (roles)","PIM"], ok:2},
  {cert:"AZ-104", domain:"Red", q:"Para exponer web multizona con TLS y WAF gestionado:", opts:["Traffic Manager","Application Gateway","Front Door","Load Balancer"], ok:2},
  {cert:"AZ-104", domain:"Almacenamiento", q:"¬øQu√© opci√≥n asegura WORM legalmente inmutable?", opts:["Soft delete","Versioning","Immutable Blob (Time-based)","GRS"], ok:2},

  {cert:"AZ-305", domain:"Gobernanza", q:"Imponer etiquetado obligatorio y restringir regiones desde un MG:", opts:["RBAC","Azure Policy (iniciativa)","Defender for Cloud","Log Analytics"], ok:1},
  {cert:"AZ-305", domain:"Red", q:"Hub global con inspecci√≥n centralizada + sedes:", opts:["VNet mesh","Virtual WAN + Hub seguro","App Gateway en cada spoke","NVAs por spoke"], ok:1},
  {cert:"AZ-305", domain:"Datos", q:"DB global con latencia ms y multi-master:", opts:["SQL MI","Cosmos DB","PostgreSQL Flex","SQL en VM"], ok:1},

  {cert:"SAA-C03", domain:"Seguro", q:"Secretos con rotaci√≥n y KMS integrado:", opts:["Secrets Manager","Parameter Store","S3 SSE-S3","CloudHSM"], ok:0},
  {cert:"SAA-C03", domain:"Red", q:"Acceso a S3 sin Internet desde VPC:", opts:["Gateway VPC Endpoint","Interface Endpoint","NAT GW","IGW"], ok:0},
  {cert:"SAA-C03", domain:"HA", q:"Publicar eventos a muchos consumidores:", opts:["SQS FIFO","SNS fanout","S3 events","Kinesis FH"], ok:1}
];

/* ===== STATE ===== */
let filterCert = "ALL";
let weekly = JSON.parse(localStorage.getItem("weeklyProgress")||"25"); // demo
const GRID_SIZE = 6;                 // 3 x 2
const REWARD_XP = 10, REWARD_DIA = 2;

const grid = document.getElementById('grid');
const goalTxt = document.getElementById('goalTxt');
const goalBar = document.getElementById('goalBar');
const goalPct = document.getElementById('goalPct');

/* ===== HELPERS ===== */
const rand = (min,max)=> Math.floor(Math.random()*(max-min+1))+min;
function sampleMission(cert){
  const pool = MISSIONS.filter(m => cert==="ALL" ? true : m.cert===cert);
  return structuredClone(pool[rand(0, pool.length-1)]);
}
function updateGoal(v){
  weekly = Math.min(70, Math.max(0, v));
  localStorage.setItem("weeklyProgress", weekly);
  const pct = Math.round((weekly/70)*100);
  goalTxt.textContent = `${weekly} / 70`;
  goalBar.style.width = `${pct}%`;
  goalPct.textContent = `${pct}%`;
}

/* ===== BUILD GRID (3√ó2) ===== */
function buildGrid(){
  grid.innerHTML = "";
  for(let i=0;i<GRID_SIZE;i++){
    const m = sampleMission(filterCert);
    grid.appendChild(createCard(m));
  }
}
function createCard(m){
  const card = document.createElement('article');
  card.className = 'card new';
  card.dataset.cert = m.cert;
  card.innerHTML = `
    <div class="meta-row">
      <span class="chip cert">${m.cert}</span>
      <span class="chip xp">+${REWARD_XP} XP</span>
      <span class="chip dia">+${REWARD_DIA}</span>
    </div>
    <div class="tit">${m.cert} ¬∑ ${m.domain}</div>
    <div class="desc">Reto rel√°mpago: 1 pregunta</div>
    <button class="play">JUGAR</button>
    <div class="ribbon">SUPERADA</div>
  `;
  card.querySelector('.play').addEventListener('click',()=>openMission(card,m));
  return card;
}

/* ===== MODAL FLOW ===== */
const modal = document.getElementById('modal');
const mClose = document.getElementById('mClose');
const mTitle = document.getElementById('mTitle');
const mCert  = document.getElementById('mCert');
const mOpts  = document.getElementById('mOpts');

let activeCard = null, activeMission = null;

function openMission(card,m){
  activeCard = card; activeMission = m;
  mTitle.textContent = m.q;
  mCert.textContent  = m.cert;
  mOpts.innerHTML = '';
  m.opts.forEach((t,idx)=>{
    const el = document.createElement('label');
    el.className = 'opt';
    el.innerHTML = `<input type="radio" name="opt" value="${idx}"> <span>${t}</span>`;
    el.addEventListener('click',()=>{
      const correct = (idx === m.ok);
      Array.from(mOpts.children).forEach((o,i)=>{
        o.classList.toggle('correct', i===m.ok);
        if(i===idx && !correct) o.classList.add('wrong');
      });
      if(correct){ onWin(); } 
    });
    mOpts.appendChild(el);
  });
  modal.classList.add('show');
}
function onWin(){
  modal.classList.remove('show');
  if(!activeCard) return;
  const btn = activeCard.querySelector('.play');
  btn.setAttribute('disabled','true');
  activeCard.classList.add('won');
  updateGoal(weekly+1);

  setTimeout(()=>{
    activeCard.classList.add('out');
    setTimeout(()=>{
      const parent = activeCard.parentElement;
      const certHere = filterCert==="ALL" ? "ALL" : activeCard.dataset.cert;
      activeCard.remove();
      const replacement = createCard(sampleMission(certHere));
      parent.appendChild(replacement);
    }, 350);
  }, 1200);
}

/* ===== RANKING FAKE REAL-TIME ===== */
const players = [
  {name:"CloudNinja", dia:44},
  {name:"Ballester21", dia:32, me:true},
  {name:"AKS_Master", dia:27},
  {name:"S3Wizard", dia:21},
  {name:"NetSecX", dia:18}
];
const rlist = document.getElementById('rlist');
function renderRanking(){
  rlist.innerHTML = "";
  players.sort((a,b)=> b.dia - a.dia);
  players.forEach((p,i)=>{
    const row = document.createElement('div');
    row.className = 'rrow' + (p.me ? ' me':'');
    row.innerHTML = `
      <div>${i+1}</div>
      <div class="rname">${p.name}</div>
      <div class="rpts">üíé ${p.dia}</div>
    `;
    rlist.appendChild(row);
  });
}
setInterval(()=>{
  const idx = rand(0, players.length-1);
  players[idx].dia += rand(0,2);
  renderRanking();
}, 1600);

/* ===== FILTERS & RESET ===== */
document.getElementById('filters').addEventListener('click', (e)=>{
  const b = e.target.closest('.filter'); if(!b) return;
  document.querySelectorAll('.filter').forEach(x=>x.classList.remove('active'));
  b.classList.add('active');
  filterCert = b.dataset.cert;
  buildGrid();
});
document.getElementById('btnReset').addEventListener('click', ()=>{
  updateGoal(0);
  buildGrid();
});

/* ===== MODAL CLOSE ===== */
mClose.addEventListener('click',()=>modal.classList.remove('show'));
modal.addEventListener('click',e=>{ if(e.target===modal) modal.classList.remove('show'); });

/* ===== INIT ===== */
updateGoal(weekly);
buildGrid();
renderRanking();
</script>
</body>
</html>
